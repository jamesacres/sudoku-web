(()=>{var e={};e.id=563,e.ids=[563],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},2314:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(5024),t(8142),t(8909);var n=t(3282),o=t(5736),a=t(3906),s=t.n(a),i=t(6880),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d=["",{children:["puzzle",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5024)),"/home/node/git/sudoku-web/apps/sudoku/src/app/puzzle/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,154))).default(e),async e=>(await Promise.resolve().then(t.bind(t,6495))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,8142)),"/home/node/git/sudoku-web/apps/sudoku/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,8909)),"/home/node/git/sudoku-web/apps/sudoku/src/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,154))).default(e),async e=>(await Promise.resolve().then(t.bind(t,6495))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/node/git/sudoku-web/apps/sudoku/src/app/puzzle/page.tsx"],u="/puzzle/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/puzzle/page",pathname:"/puzzle",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4231:(e,r,t)=>{Promise.resolve().then(t.bind(t,5439))},5439:(e,r,t)=>{"use strict";let n;t.r(r),t.d(r,{default:()=>eM});var o=t(3227),a=t(970),s=t(3677),i=t.n(s);let l=({notes:e})=>o.jsx("div",{className:"grid h-full w-full grid-cols-3 grid-rows-3",children:[1,2,3,4,5,6,7,8,9].map(r=>{let t=e[r];return t?o.jsx("div",{className:`flex aspect-square h-full w-full items-center justify-center text-xs md:text-sm ${t?"dark:text-white text-black":"text-slate-400"} ${t?"font-bold":void 0}`,children:r},crypto.randomUUID()):o.jsx("div",{},crypto.randomUUID())})}),d=(0,s.memo)(function(e){return l(e)}),c=({cellId:e,selectedCell:r,setSelectedCell:t,selectNumber:n,value:a,validation:s,isInitial:i,isZoomMode:l,onDragStart:c})=>{let u;let m=!(a&&"number"==typeof a),p=m&&"object"==typeof a?a:{},f=r===e;return!m&&a&&void 0!==s?u=s?"bg-green-600":"bg-red-600":f&&(u=`dark:bg-theme-primary-dark/75 bg-theme-primary-lighter${i?"/50":""}`),o.jsx("div",{"data-cell-container-id":e,onPointerDown:r=>{t(e),l&&c&&c(r)},className:`flex h-full w-full items-center justify-center border border-zinc-300 dark:border-zinc-400 ${u}`,children:m?o.jsx(d,{notes:p,selectNumber:n}):o.jsx("div",{"data-cell-id":e,className:`text-center text-lg sm:text-3xl ${i?"text-zinc-500 dark:text-zinc-400":"text-zinc-900 dark:text-zinc-50"}`,children:!!a&&a})})},u=(0,s.memo)(function(e){return c(e)}),m=({boxId:e,selectedCell:r,setSelectedCell:t,answer:n,selectNumber:s,validation:i,initial:l,isZoomMode:d,onDragStart:c})=>o.jsx("div",{"data-box-id":e,className:"border-theme-primary dark:border-theme-primary-light grid aspect-square cursor-pointer grid-cols-3 grid-rows-3 border border-2",children:Array.from([,,,]).map((m,p)=>Array.from([,,,]).map((m,f)=>{let g=(0,a.Dv)(e,f,p);return o.jsx(u,{cellId:g,selectedCell:r,setSelectedCell:t,selectNumber:s,value:n[f][p],validation:i&&i[f][p],isInitial:!!l[f][p],isZoomMode:d,onDragStart:c},g)}))}),p=(0,s.memo)(function(e){return m(e)});!function(){var e=Error("Cannot find module './calculateId'");throw e.code="MODULE_NOT_FOUND",e}();let f=()=>[[[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]],[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]],[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]]],[[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]],[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]],[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]]],[[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]],[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]],[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]]]],g=(e,r,t)=>{let n=!0,o=[0,1,2],a=f();for(let s of o)for(let i of o)for(let l of o)for(let d of o)if(!e[s][i][l][d]){let e=r[s][i][l][d]===t[s][i][l][d];a[s][i][l][d]=e,e||(n=!1)}return{validation:a,isComplete:n}},x=(e,r)=>{let{box:t,cell:n}=Object(function(){var e=Error("Cannot find module './calculateId'");throw e.code="MODULE_NOT_FOUND",e}())(e);return!!r[t.x][t.y][n.x][n.y]},b=(e,r,t,n)=>{let o=f(),{box:a,cell:s}=Object(function(){var e=Error("Cannot find module './calculateId'");throw e.code="MODULE_NOT_FOUND",e}())(e);if(!r[a.x][a.y][s.x][s.y]){let e=t[a.x][a.y][s.x][s.y]===n[a.x][a.y][s.x][s.y];o[a.x][a.y][s.x][s.y]=e}return o};var h=t(2473),v=t(6047),y=t.n(v);function w(){return(w=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var j=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",w({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("polyline",{points:"18 15 12 9 6 15"}))});function k(){return(k=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}j.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},j.displayName="ChevronUp";var O=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",k({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});function N(){return(N=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}O.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},O.displayName="Minus";var C=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",N({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),i().createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))});function z(){return(z=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}C.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},C.displayName="Edit";var E=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",z({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}))});function S(){return(S=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}E.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},E.displayName="Edit2";var P=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",S({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),i().createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}))});function D(){return(D=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}P.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},P.displayName="Copy";var T=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",D({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("path",{d:"M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"}),i().createElement("line",{x1:"18",y1:"9",x2:"12",y2:"15"}),i().createElement("line",{x1:"12",y1:"9",x2:"18",y2:"15"}))});function L(){return(L=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}T.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},T.displayName="Delete";var U=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",L({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("polyline",{points:"9 14 4 9 9 4"}),i().createElement("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"}))});function M(){return(M=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}U.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},U.displayName="CornerUpLeft";var I=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",M({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("polyline",{points:"15 14 20 9 15 4"}),i().createElement("path",{d:"M4 20v-7a4 4 0 0 1 4-4h12"}))});function _(){return(_=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}I.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},I.displayName="CornerUpRight";var R=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",_({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}))});function F(){return(F=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}R.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},R.displayName="Square";var $=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",F({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("rect",{x:"3",y:"3",width:"7",height:"7"}),i().createElement("rect",{x:"14",y:"3",width:"7",height:"7"}),i().createElement("rect",{x:"14",y:"14",width:"7",height:"7"}),i().createElement("rect",{x:"3",y:"14",width:"7",height:"7"}))});function A(){return(A=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}$.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},$.displayName="Grid";var Z=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",A({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),i().createElement("circle",{cx:"12",cy:"12",r:"3"}))});function B(){return(B=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}Z.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},Z.displayName="Eye";var q=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",B({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("polyline",{points:"23 4 23 10 17 10"}),i().createElement("polyline",{points:"1 20 1 14 7 14"}),i().createElement("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}))});function W(){return(W=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}q.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},q.displayName="RefreshCw";var V=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",W({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),i().createElement("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}))});V.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},V.displayName="Unlock";let G=({selectNumber:e,isInputDisabled:r})=>o.jsx("div",{className:"mb-0 grid h-full w-full grid-cols-9 lg:grid-cols-3 lg:grid-rows-3",children:[1,2,3,4,5,6,7,8,9].map(t=>o.jsx("button",{disabled:r,onClick:()=>{e(t)},className:"flex h-full w-full cursor-pointer items-center justify-center rounded-sm px-4 py-2 text-2xl text-black disabled:cursor-not-allowed disabled:opacity-50 dark:text-white",children:t},crypto.randomUUID()))});var Y=t(546);let H=({children:e})=>{let[r,t]=(0,s.useState)(!0);return o.jsx(o.Fragment,{children:r?o.jsx("div",{className:"mb-10 text-center text-sm",children:(0,o.jsxs)("div",{className:"relative inline-block rounded-sm bg-amber-100 p-4 pr-8 text-black",children:[o.jsx("button",{onClick:()=>t(!1),children:o.jsx(Y.Z,{className:"absolute top-2 right-2"})}),e]})}):o.jsx(o.Fragment,{})})};(function(){var e=Error("Cannot find module '../Toggle'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/utils/dailyActionCounter'");throw e.code="MODULE_NOT_FOUND",e}();let K=({isInputDisabled:e,isValidateCellDisabled:r,isDeleteDisabled:t,validateGrid:n,validateCell:a,isUndoDisabled:i,isRedoDisabled:l,undo:d,redo:c,selectNumber:u,isNotesMode:m,setIsNotesMode:p,isZoomMode:f,setIsZoomMode:g,reset:x,reveal:b,copyGrid:v,onAdvancedToggle:y,isSubscribed:w})=>{let[k,N]=(0,s.useState)(!0),[z,S]=(0,s.useState)(!1),[D,L]=(0,s.useState)(!1),M=(0,s.useRef)(0),_=(0,s.useRef)(null),F=()=>{if(!z){let e=!k;N(e),y?.(e)}},A=(0,s.useCallback)(e=>{S(!0),M.current=e},[]),B=(0,s.useCallback)(e=>{if(!z)return;let r=M.current-e;r>20&&!k?(N(!0),S(!1)):r<-20&&k&&(N(!1),S(!1))},[z,k]),W=(0,s.useCallback)(()=>{S(!1)},[]),Y=(0,s.useCallback)(()=>{v(),L(!0),setTimeout(()=>L(!1),2e3)},[v]);(0,s.useEffect)(()=>{setTimeout(()=>N(!1),1e3)},[]),(0,s.useEffect)(()=>{if(!z)return;let e=e=>{B(e.clientY)},r=e=>{e.preventDefault(),B(e.touches[0].clientY)},t=()=>{W()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",t)}},[z,B,W]);let K=(0,s.useCallback)(e=>{e.preventDefault(),A(e.clientY)},[A]),J=(0,s.useCallback)(e=>{e.preventDefault(),A(e.touches[0].clientY)},[A]);return(0,o.jsxs)("div",{className:"mt-0 mb-0 overflow-visible px-2 pt-2 lg:mb-16 xl:max-w-lg",children:[o.jsx("div",{className:"hidden lg:block",children:(0,o.jsxs)(H,{children:["Keyboard: arrow keys, undo, redo.",o.jsx("br",{}),"Hold shift or press n to toggle notes mode.",o.jsx("br",{}),"Press c to validate cell, g to validate grid."]})}),(0,o.jsxs)("div",{className:"pb-safe mt-0 touch-none overflow-visible rounded-t-xl bg-white/60 p-3 pt-0 shadow-lg backdrop-blur-md lg:pt-3 dark:bg-zinc-900/60",children:[o.jsx("div",{className:"lg:hidden",children:(0,o.jsxs)("div",{className:"flex w-full cursor-grab items-center justify-center gap-1.5 rounded-lg px-2 py-0 text-xs font-medium text-gray-600 transition-all duration-60 select-none dark:text-gray-400",children:[o.jsx("p",{className:"grow-0 cursor-pointer",onClick:F,children:k?o.jsx(h.Z,{size:15}):o.jsx(j,{size:15})}),o.jsx("div",{ref:_,className:`flex max-h-[35px] w-full cursor-grab items-center justify-center gap-1.5 rounded-lg px-2 py-0 text-xs font-medium text-gray-600 transition-all duration-60 select-none dark:text-gray-400 ${z?"cursor-grabbing":"cursor-grab"}`,onMouseDown:K,onTouchStart:J,children:o.jsx(O,{size:50,className:"grow-3"})}),o.jsx("p",{className:"grow-0 cursor-pointer",onClick:F,children:k?o.jsx(h.Z,{size:15}):o.jsx(j,{size:15})})]})}),(0,o.jsxs)("div",{className:"mb-0 flex items-center justify-between border-b border-gray-200 pb-3 lg:mb-3 dark:border-gray-600",children:[o.jsx("div",{className:"flex-1"}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium text-gray-700 dark:text-gray-300",children:[m?o.jsx(C,{size:14}):o.jsx(E,{size:14}),"Notes"]}),o.jsx(Object(function(){var e=Error("Cannot find module '../Toggle'");throw e.code="MODULE_NOT_FOUND",e}()),{isEnabled:m,setEnabled:p})]}),o.jsx("div",{className:"flex flex-1 justify-end",children:(0,o.jsxs)("button",{onClick:Y,className:"flex cursor-pointer items-center gap-1 rounded-md bg-gray-100 px-1.5 py-1 text-xs font-medium text-gray-700 transition-all duration-150 hover:bg-gray-200 active:bg-gray-300 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500",children:[o.jsx(P,{size:10}),D?"Copied!":"Export"]})})]}),(0,o.jsxs)("div",{className:"flex flex-col items-center gap-2 overflow-visible lg:flex-row",children:[o.jsx("div",{className:"order-1 flex-shrink-0 lg:order-1",children:o.jsx(G,{selectNumber:u,isInputDisabled:e})}),(0,o.jsxs)("div",{className:"order-2 w-full flex-1 overflow-visible lg:order-2 lg:w-auto",children:[(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-2 overflow-visible",children:[(0,o.jsxs)("button",{disabled:t,onClick:()=>u(0),className:"flex cursor-pointer items-center justify-center gap-1.5 rounded-lg bg-gray-100 px-2 py-2.5 text-sm font-medium text-gray-700 transition-all duration-150 hover:bg-gray-200 active:bg-gray-300 disabled:cursor-not-allowed disabled:bg-gray-200 disabled:text-gray-400 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500 dark:disabled:bg-zinc-800",children:[o.jsx(T,{size:15}),"Delete"]}),(0,o.jsxs)("button",{disabled:i,onClick:()=>d(),className:"relative flex cursor-pointer items-center justify-center gap-1.5 rounded-lg bg-gray-100 px-2 py-2.5 text-sm font-medium text-gray-700 transition-all duration-150 hover:bg-gray-200 active:bg-gray-300 disabled:cursor-not-allowed disabled:bg-gray-200 disabled:text-gray-400 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500 dark:disabled:bg-zinc-800",children:[o.jsx(U,{size:15}),"Undo",!w&&!i&&!Object(function(){var e=Error("Cannot find module '@/utils/dailyActionCounter'");throw e.code="MODULE_NOT_FOUND",e}())()&&o.jsx("span",{className:"absolute -top-1 -right-1 z-10 inline-flex items-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 px-1 py-0.5 text-xs font-semibold text-white shadow-lg",children:"✨"})]}),(0,o.jsxs)("button",{disabled:l,onClick:()=>c(),className:"flex cursor-pointer items-center justify-center gap-1.5 rounded-lg bg-gray-100 px-2 py-2.5 text-sm font-medium text-gray-700 transition-all duration-150 hover:bg-gray-200 active:bg-gray-300 disabled:cursor-not-allowed disabled:bg-gray-200 disabled:text-gray-400 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500 dark:disabled:bg-zinc-800",children:["Redo",o.jsx(I,{size:15})]})]}),(0,o.jsxs)("div",{className:`mt-2 overflow-visible transition-all duration-300 ease-in-out lg:block ${k?"max-h-96 opacity-100":"max-h-0 opacity-0 lg:max-h-96 lg:opacity-100"}`,children:[(0,o.jsxs)("div",{className:"mb-2 grid grid-cols-3 gap-2 overflow-visible",children:[(0,o.jsxs)("button",{disabled:r,onClick:()=>a(),className:"relative flex cursor-pointer items-center justify-center gap-1.5 rounded-lg bg-gray-100 px-2 py-2.5 text-sm font-medium text-gray-700 transition-all duration-150 hover:bg-gray-200 active:bg-gray-300 disabled:cursor-not-allowed disabled:bg-gray-200 disabled:text-gray-400 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500 dark:disabled:bg-zinc-800",children:[o.jsx(R,{size:15}),"Cell"]}),(0,o.jsxs)("button",{onClick:()=>n(),className:"relative flex cursor-pointer items-center justify-center gap-1.5 rounded-lg bg-gray-100 px-2 py-2.5 text-sm font-medium text-gray-700 transition-all duration-150 hover:bg-gray-200 active:bg-gray-300 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500",children:[o.jsx($,{size:15}),"Grid",!w&&!Object(function(){var e=Error("Cannot find module '@/utils/dailyActionCounter'");throw e.code="MODULE_NOT_FOUND",e}())()&&o.jsx("span",{className:"absolute -top-1 -right-1 z-10 inline-flex items-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 px-1 py-0.5 text-xs font-semibold text-white shadow-lg",children:"✨"})]}),(0,o.jsxs)("button",{disabled:!f&&e,onClick:()=>g(!f),className:`flex cursor-pointer items-center justify-center gap-1.5 rounded-lg px-2 py-2.5 text-sm font-medium transition-all duration-150 disabled:cursor-not-allowed disabled:bg-gray-200 disabled:text-gray-400 dark:disabled:bg-zinc-800 ${f?"bg-theme-primary hover:bg-theme-primary-dark active:bg-theme-primary-darker dark:bg-theme-primary-light dark:hover:bg-theme-primary dark:active:bg-theme-primary-dark text-white dark:text-gray-900":"bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500"}`,children:[o.jsx(Z,{size:15}),"Zoom"]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 overflow-visible",children:[(0,o.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you wish to reset the whole grid?")&&x()},className:"flex cursor-pointer items-center justify-center gap-1.5 rounded-lg bg-gray-100 px-2 py-2.5 text-sm font-medium text-gray-700 transition-all duration-150 hover:bg-gray-200 active:bg-gray-300 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500",children:[o.jsx(q,{size:15}),"Reset"]}),(0,o.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you wish to reveal the whole grid?")&&b()},className:"relative flex cursor-pointer items-center justify-center gap-1.5 rounded-lg bg-gray-100 px-2 py-2.5 text-sm font-medium text-gray-700 transition-all duration-150 hover:bg-gray-200 active:bg-gray-300 dark:bg-zinc-700 dark:text-gray-200 dark:hover:bg-zinc-600 dark:active:bg-zinc-500",children:[o.jsx(V,{size:15}),"Reveal",!w&&o.jsx("span",{className:"absolute -top-1 -right-1 z-10 inline-flex items-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 px-1 py-0.5 text-xs font-semibold text-white shadow-lg",children:"✨"})]})]})]})]})]})]})]})},J=(0,s.memo)(function(e){return K(e)});var Q=t(4260),X=t(5930);let ee=({seconds:e,countdown:r,isComplete:t})=>{let n;return n=t?(0,o.jsxs)("span",{children:["\uD83D\uDC4F ",(0,a.ZC)(e)," \uD83D\uDC4F"]}):r?o.jsx("span",{children:1===r?"GO!":r-1}):(0,o.jsxs)(o.Fragment,{children:[o.jsx(X.Z,{className:"text-theme-primary dark:text-theme-primary-light m-auto inline",size:24})," ",(0,a.ZC)(e)]}),o.jsx("p",{className:"min-h-8 font-mono",children:n})};var er=t(5366),et=t(1566);!function(){var e=Error("Cannot find module '../CopyButton/CopyButton'");throw e.code="MODULE_NOT_FOUND",e}();let en=({puzzleId:e,redirectUri:r,partyId:t,partyName:n,extraSmall:i=!1})=>{let l=`sudoku-${e}`,[d,c]=(0,s.useState)(""),{createInvite:u}=(0,a.QP)({}),m=async()=>{let e=d;if(!d){let o=new Date;o.setDate(o.getDate()+7);let a=await u({sessionId:l,redirectUri:r,expiresAt:o.toISOString(),description:n,resourceId:`party-${t}`});a&&c(e=`https://sudoku.bubblyclouds.com/invite?inviteId=${a.inviteId}`)}return e};return o.jsx(Object(function(){var e=Error("Cannot find module '../CopyButton/CopyButton'");throw e.code="MODULE_NOT_FOUND",e}()),{getText:m,extraSmall:i,partyName:n})};var eo=t(1290),ea=t(9827),es=t(402),ei=t(6668);function el(){return(el=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var ed=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",el({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("polyline",{points:"3 6 5 6 21 6"}),i().createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}))});ed.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},ed.displayName="Trash";var ec=t(8872);function eu(){return(eu=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var em=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",eu({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),i().createElement("circle",{cx:"8.5",cy:"7",r:"4"}),i().createElement("line",{x1:"23",y1:"11",x2:"17",y2:"11"}))});em.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},em.displayName="UserMinus";let ep=({isOpen:e,onClose:r,onConfirm:t,type:n,partyName:a,memberName:i,isOwner:l=!1})=>{let[d,c]=(0,s.useState)(!1),u=async()=>{c(!0);try{await t(),r()}catch(e){console.error(`Error ${"leave"===n?"leaving":"removing member from"} party:`,e)}finally{c(!1)}},m="leave"===n,p=m&&l,f=p?ed:m?ec.Z:em;return o.jsx(es.u,{appear:!0,show:e,as:s.Fragment,children:(0,o.jsxs)(ei.V,{as:"div",className:"relative z-50",onClose:r,children:[o.jsx(es.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black/25"})}),o.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:o.jsx(es.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,o.jsxs)(ei.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all dark:bg-zinc-800",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[o.jsx("div",{className:"mr-4 flex-shrink-0",children:o.jsx(f,{className:"h-8 w-8"})}),o.jsx(ei.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",children:p?"Delete Party":m?"Leave Party":"Remove Member"})]}),o.jsx("div",{className:"mt-4",children:o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p?`Are you sure you want to delete "${a}"? This will permanently remove the party and all members will lose access. This action cannot be undone.`:m?`Are you sure you want to leave "${a}"? You will no longer see other members' progress or be able to participate in this party.`:`Are you sure you want to remove "${i}" from "${a}"? They will no longer be able to participate in this party.`})}),(0,o.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[o.jsx("button",{type:"button",className:"focus-visible:ring-theme-primary inline-flex justify-center rounded-md border border-transparent bg-gray-100 px-4 py-2 text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 dark:bg-zinc-700 dark:text-gray-100 dark:hover:bg-zinc-600",onClick:r,disabled:d,children:"Cancel"}),o.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed bg-red-600 hover:bg-red-700 focus-visible:ring-red-500 disabled:bg-red-300",onClick:u,disabled:d,children:d?p?"Deleting...":m?"Leaving...":"Removing...":p?"Delete Party":m?"Leave":"Remove"})]})]})})})})]})})};function ef(){return(ef=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var eg=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",ef({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("path",{d:"M12 20h9"}),i().createElement("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}))});eg.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},eg.displayName="Edit3",function(){var e=Error("Cannot find module '../CopyButton/CopyButton'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/utils/playerColors'");throw e.code="MODULE_NOT_FOUND",e}();let ex=({party:{partyName:e,isOwner:r,members:t,partyId:n,maxSize:i},puzzleId:l,redirectUri:d,sessionParty:c})=>{let{parties:u,leaveParty:m,removeMember:p,deleteParty:f,updateParty:g}=(0,Q.L)(),{user:x}=(0,s.useContext)(a.St)||{},{isSubscribed:b,subscribeModal:h}=(0,s.useContext)(a.lK)||{},[v,y]=(0,s.useState)({isOpen:!1,type:"leave"}),[w,j]=(0,s.useState)(!1),[k,O]=(0,s.useState)(i||5),[N,C]=(0,s.useState)(!1),[z,E]=(0,s.useState)(e),S=Object(function(){var e=Error("Cannot find module '@/utils/playerColors'");throw e.code="MODULE_NOT_FOUND",e}())(u),P=async()=>{await f(n)},D=async()=>{await m(n)},T=async()=>{v.userId&&await p(n,v.userId)},L=async e=>{e>5&&!b?h?.showModalIfRequired(async()=>{await g(n,{maxSize:e})&&j(!1)},()=>{O(i||5)},a.SubscriptionContext.PARTY_MAX_SIZE):await g(n,{maxSize:e})&&j(!1)},U=()=>{O(i||5),j(!1)},M=async e=>{await g(n,{partyName:e})&&C(!1)},I=()=>{E(e),C(!1)};return(0,o.jsxs)("li",{children:[(0,o.jsxs)("div",{className:"rounded-2xl border border-stone-200 bg-stone-50/80 p-4 shadow-sm backdrop-blur-sm dark:border-gray-700 dark:bg-zinc-800/80",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[r&&N?(0,o.jsxs)("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",value:z,onChange:e=>E(e.target.value),onKeyDown:e=>{"Enter"===e.key?M(z):"Escape"===e.key&&I()},onBlur:()=>M(z),autoFocus:!0,className:"text-theme-primary dark:text-theme-primary-light w-full rounded border border-gray-300 bg-white px-2 py-1 text-xl font-semibold focus:border-transparent focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-zinc-700"}),o.jsx("button",{onClick:I,className:"px-2 py-1 text-xs text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",title:"Cancel",children:"Cancel"})]}):(0,o.jsxs)("div",{className:"flex items-start space-x-2",children:[o.jsx("h3",{className:"text-theme-primary dark:text-theme-primary-light text-xl leading-tight font-semibold",children:e}),r&&o.jsx("button",{onClick:()=>{C(!0)},className:"mt-0.5 flex-shrink-0 p-1 text-blue-500 transition-colors hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300",title:"Edit party name",children:o.jsx(eg,{className:"h-4 w-4"})})]}),(0,o.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[o.jsx(er.Z,{className:"h-4 w-4 flex-shrink-0 text-gray-500 dark:text-gray-400"}),r&&w?(0,o.jsxs)("div",{className:"flex flex-wrap items-center space-x-2",children:[(0,o.jsxs)("select",{value:k,onChange:e=>{let r=parseInt(e.target.value);O(r),L(r)},onBlur:U,autoFocus:!0,className:"min-w-0 rounded border border-gray-300 bg-white px-2 py-1 text-sm focus:border-transparent focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-zinc-700 dark:text-gray-200",children:[o.jsx("option",{value:2,children:"2 members"}),o.jsx("option",{value:3,children:"3 members"}),o.jsx("option",{value:4,children:"4 members"}),o.jsx("option",{value:5,children:"5 members"}),(0,o.jsxs)("option",{value:6,children:["6 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:7,children:["7 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:8,children:["8 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:9,children:["9 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:10,children:["10 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:11,children:["11 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:12,children:["12 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:13,children:["13 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:14,children:["14 members ",b?"":"✨ Premium"]}),(0,o.jsxs)("option",{value:15,children:["15 members ",b?"":"✨ Premium"]})]}),o.jsx("button",{onClick:U,className:"px-2 py-1 text-xs text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",title:"Cancel",children:"Cancel"})]}):(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.length,"/",i||5," members"]}),r&&i&&i>5&&!b&&o.jsx("span",{className:"inline-flex h-3 w-3 items-center justify-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 text-[6px] font-semibold text-white shadow-lg",children:"✨"}),r&&o.jsx("button",{onClick:()=>{j(!0)},className:"ml-2 p-1 text-blue-500 transition-colors hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300",title:"Edit max members",children:o.jsx(eg,{className:"h-4 w-4"})})]})]})]}),o.jsx("button",{type:"button",className:"ml-2 inline-flex flex-shrink-0 items-center rounded-md border border-transparent px-3 py-2 text-sm font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 bg-red-100 text-red-700 hover:bg-red-200 focus-visible:ring-red-500 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",onClick:()=>y({isOpen:!0,type:"leave"}),children:r?o.jsx(ed,{className:"h-3 w-3"}):o.jsx(ec.Z,{className:"h-3 w-3"})})]}),r&&t.length<(i||5)&&o.jsx("div",{className:"mt-2",children:o.jsx(en,{puzzleId:l,redirectUri:d,partyId:n,partyName:e})}),!r&&(0,o.jsxs)("div",{className:"mt-2 rounded-lg border border-blue-200 bg-blue-50/50 p-3 dark:border-blue-800 dark:bg-blue-900/20",children:[o.jsx("p",{className:"mb-2 text-xs text-gray-600 dark:text-gray-400",children:"Share this link with current team members to join this puzzle"}),o.jsx(Object(function(){var e=Error("Cannot find module '../CopyButton/CopyButton'");throw e.code="MODULE_NOT_FOUND",e}()),{getText:()=>`https://sudoku.bubblyclouds.com${window.location.pathname}${window.location.search}`,partyName:e})]}),o.jsx("ul",{className:"mt-4 space-y-4",children:t.map(({memberNickname:t,userId:s,isUser:i})=>{let u=c?.memberSessions[s],m=u?(0,ea.q)(u.state.initial,u.state.final,u.state.answerStack[u.state.answerStack.length-1]):0,p=Object(function(){var e=Error("Cannot find module '@/utils/playerColors'");throw e.code="MODULE_NOT_FOUND",e}())(s,S,s===x?.sub);return(0,o.jsxs)("li",{className:"rounded-xl bg-gray-50 p-3 dark:bg-zinc-700/40",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[o.jsx("div",{className:`mr-2 h-3 w-3 rounded-full ${p}`}),(0,o.jsxs)("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[t,i&&" (you)"]})]}),r&&!i&&(0,o.jsxs)("button",{type:"button",className:"relative inline-flex items-center rounded-md border border-transparent bg-red-100 px-2 py-1 text-xs font-medium text-red-700 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-1 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30",onClick:()=>{b?y({isOpen:!0,type:"remove",memberName:t,userId:s}):h?.showModalIfRequired(()=>{y({isOpen:!0,type:"remove",memberName:t,userId:s})},()=>{},a.SubscriptionContext.REMOVE_MEMBER)},children:[o.jsx(em,{className:"h-3 w-3"}),!b&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 z-10 inline-flex h-3 w-3 items-center justify-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 text-[6px] font-semibold text-white shadow-lg",children:"✨"})]})]}),!i&&!c?.memberSessions[s]&&(0,o.jsxs)("div",{className:"mt-2",children:[o.jsx("p",{className:"text-sm text-gray-500 italic dark:text-gray-400",children:"Not started! Ask them to play"}),r?o.jsx(en,{puzzleId:l,redirectUri:d,partyId:n,partyName:e,extraSmall:!0}):o.jsx("div",{className:"mt-1",children:o.jsx(Object(function(){var e=Error("Cannot find module '../CopyButton/CopyButton'");throw e.code="MODULE_NOT_FOUND",e}()),{getText:()=>`https://sudoku.bubblyclouds.com${window.location.pathname}${window.location.search}`,extraSmall:!0,partyName:e})})]}),c?.memberSessions[s]?.state.timer&&o.jsx("div",{className:"text-theme-primary dark:text-theme-primary-light mt-2",children:o.jsx(ee,{seconds:(0,a.RP)(c?.memberSessions[s]?.state.timer),isComplete:!!c?.memberSessions[s]?.state.completed})}),u&&(0,o.jsxs)("div",{className:"mt-2 flex items-center",children:[o.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-zinc-600",children:o.jsx("div",{className:"bg-theme-primary dark:bg-theme-primary-light h-full",style:{width:`${m}%`}})}),(0,o.jsxs)("span",{className:"ml-2 text-sm font-medium text-gray-600 dark:text-gray-300",children:[m,"%"]})]}),!i&&c?.memberSessions[s]&&o.jsx("div",{className:"mt-3 rounded-lg bg-stone-50 p-2 shadow-sm dark:bg-zinc-800",children:o.jsx(eo.Z,{final:c.memberSessions[s].state.final,initial:c.memberSessions[s].state.initial,latest:c.memberSessions[s].state.answerStack[c.memberSessions[s].state.answerStack.length-1]})})]},s)})})]}),o.jsx(ep,{isOpen:v.isOpen,onClose:()=>y({isOpen:!1,type:v.type}),onConfirm:"leave"===v.type?r?P:D:T,type:v.type,partyName:e,memberName:v.memberName,isOwner:r})]})},eb=({showSidebar:e,setShowSidebar:r,puzzleId:t,redirectUri:n,refreshSessionParties:i,sessionParties:l})=>{let{user:d,loginRedirect:c}=(0,s.useContext)(a.St)||{},{isSubscribed:u,subscribeModal:m}=(0,s.useContext)(a.lK)||{},{parties:p,isLoading:f,showCreateParty:g,setShowCreateParty:x,isSaving:b,memberNickname:h,setMemberNickname:v,partyName:y,setPartyName:w,saveParty:j,refreshParties:k}=(0,Q.L)({refreshSessionParties:i});return(0,o.jsxs)(o.Fragment,{children:[e&&o.jsx("div",{className:"fixed top-0 left-0 z-50 h-full w-full bg-black/30 backdrop-blur-sm",onClick:()=>{r(!e)}}),o.jsx("aside",{id:"default-sidebar",className:`fixed top-0 left-0 z-50 h-screen w-72 pt-[var(--ion-safe-area-top)] xl:top-20 ${e?"":"-translate-x-full"} transition-transform xl:translate-x-0`,"aria-label":"Sidebar",children:(0,o.jsxs)("div",{className:"flex h-full flex-col rounded-r-3xl bg-stone-50/90 drop-shadow-lg backdrop-blur-md dark:bg-zinc-900/95",children:[(0,o.jsxs)("div",{className:"sticky top-0 z-10 rounded-tr-3xl px-4 pt-5 pb-3 backdrop-blur-md dark:bg-zinc-900/95",children:[o.jsx("div",{className:"mb-4 flex-nowrap items-center",role:"group","aria-label":"Button group",children:(0,o.jsxs)("div",{className:"text-theme-primary dark:text-theme-primary-light flex w-full items-center justify-between rounded-full px-4 py-2 text-right",children:[o.jsx("span",{className:"text-lg font-medium",children:"Races"}),o.jsx("button",{onClick:()=>{r(!e)},className:"cursor-pointer",children:o.jsx(Y.Z,{className:`ml-2 ${e?"":"hidden"}`})})]})}),o.jsx("p",{className:"mb-5 text-sm text-gray-600 dark:text-gray-300",children:"Challenge your friends and family to a race, who can solve it in the fastest time?"}),!g&&p.length<10&&(0,o.jsxs)("button",{className:"bg-theme-primary hover:bg-theme-primary-dark relative mt-2 flex w-full cursor-pointer items-center justify-center rounded-full px-4 py-3 font-medium text-white transition-colors",onClick:()=>{if(!d){c&&c({userInitiated:!0});return}p.length>0&&!u?m?.showModalIfRequired(()=>x(!0),()=>{},a.SubscriptionContext.MULTIPLE_PARTIES):x(!0)},children:[o.jsx(er.Z,{className:"mr-2",size:18}),"Create Racing Team",p.length>0&&!u&&o.jsx("span",{className:"absolute -top-1 -right-1 z-10 inline-flex h-4 w-4 items-center justify-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 text-[8px] font-semibold text-white shadow-lg",children:"✨"})]})]}),(0,o.jsxs)("div",{className:"pb-safe flex-grow overflow-y-auto px-4",children:[g&&(0,o.jsxs)("div",{className:"border-theme-primary/20 mt-4 rounded-2xl border bg-stone-50/50 p-4 shadow-sm backdrop-blur-sm dark:bg-zinc-800/50",children:[o.jsx("p",{className:"mb-4 text-sm text-gray-600 dark:text-gray-300",children:0===p.length?"We recommend creating your first team for your family or friend group. All members can see each other's puzzles and compete.":"All members can see each other's puzzles and compete."}),(0,o.jsxs)("form",{className:"w-full",onSubmit:e=>{e.preventDefault(),j({memberNickname:h,partyName:y})},children:[o.jsx("label",{className:"my-2 block text-xs font-bold text-gray-700 dark:text-gray-300",htmlFor:"form-nickname",children:"What do the team members call you?"}),o.jsx("input",{id:"form-nickname",className:`${b?"cursor-wait":""} focus:ring-theme-primary mr-0 w-full appearance-none rounded-xl border border-stone-300 bg-stone-50/80 px-3 py-2.5 leading-tight text-black backdrop-blur-sm focus:ring-2 dark:border-gray-600 dark:bg-zinc-800/80 dark:text-white`,type:"text",placeholder:"Nickname","aria-label":"Nickname",disabled:b,value:h,onChange:e=>{v(e.target.value)}}),o.jsx("label",{className:"my-2 mt-4 block text-xs font-bold text-gray-700 dark:text-gray-300",htmlFor:"form-party-name",children:"What shall we name this team?"}),o.jsx("div",{className:"flex items-center",children:o.jsx("input",{id:"form-party-name",className:`${b?"cursor-wait":""} focus:ring-theme-primary mr-0 w-full appearance-none rounded-xl border border-stone-300 bg-stone-50/80 px-3 py-2.5 leading-tight text-black backdrop-blur-sm focus:ring-2 dark:border-gray-600 dark:bg-zinc-800/80 dark:text-white`,type:"text",placeholder:"e.g. Family","aria-label":"Party name",disabled:b,value:y,onChange:e=>{w(e.target.value)}})}),o.jsx("button",{className:`${b?"cursor-wait":"cursor-pointer"} bg-theme-primary hover:bg-theme-primary-dark mt-4 w-full rounded-full px-4 py-2.5 font-medium text-white transition-colors`,type:"submit",disabled:b,children:b?o.jsx(et.Z,{className:"mx-auto animate-spin"}):"Create Racing Team"})]})]}),d&&!!p.length&&(0,o.jsxs)(o.Fragment,{children:[o.jsx("div",{className:"my-6 h-px bg-stone-300 dark:bg-gray-700"}),(0,o.jsxs)("div",{className:"sticky top-0 z-10 mb-4 flex items-center justify-between bg-stone-50/25 p-4 py-2 backdrop-blur-md dark:bg-zinc-900/25",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Racing Teams"}),o.jsx("button",{className:`${f||b?"cursor-wait":""} text-theme-primary dark:text-theme-primary-light cursor-pointer rounded-full bg-gray-100 p-2 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700`,disabled:f||b,onClick:()=>k(),"aria-label":"Refresh parties",children:o.jsx(q,{size:18,className:`${f?"animate-spin":""}`})})]}),o.jsx("p",{className:"mb-5 text-sm text-gray-600 dark:text-gray-300",children:"Simply send your group an invite link and close this sidebar to start solving! They can join now or in their own time."}),o.jsx("ul",{className:"space-y-4 pb-16",children:p.sort((e,r)=>r.createdAt.getTime()-e.createdAt.getTime()).map(e=>o.jsx(ex,{party:e,puzzleId:t,redirectUri:n,sessionParty:l[e.partyId]},e.partyId))})]})]})]})})]})},eh=(0,s.memo)(function(e){return eb(e)}),ev=(0,s.memo)(({countdown:e})=>!e||e<=0?null:o.jsx("div",{className:"absolute top-1/2 left-1/2 z-20 -translate-x-1/2 -translate-y-1/2 transform",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1 rounded-lg bg-gray-900 p-2 shadow-lg",children:[o.jsx("div",{className:`h-4 w-4 rounded-full border-2 transition-all duration-500 ${3===e||2===e?"scale-110 animate-pulse border-red-600 bg-red-500 shadow-lg shadow-red-500/70":"scale-90 border-red-900 bg-red-900/20"}`}),o.jsx("div",{className:`h-4 w-4 rounded-full border-2 transition-all duration-500 ${2===e?"scale-110 animate-pulse border-yellow-600 bg-yellow-400 shadow-lg shadow-yellow-400/70":"scale-90 border-yellow-900 bg-yellow-900/20"}`}),o.jsx("div",{className:`h-4 w-4 rounded-full border-2 transition-all duration-500 ${1===e?"scale-125 animate-bounce border-green-600 bg-green-400 shadow-lg shadow-green-400/70":"scale-90 border-green-900 bg-green-900/20"}`})]})}));var ey=t(649),ew=t(3974);!function(){var e=Error("Cannot find module '@/utils/playerColors'");throw e.code="MODULE_NOT_FOUND",e}();let ej=({sessionParties:e,initial:r,final:t,answer:n,userId:i,onClick:l,countdown:d,completed:c,refreshSessionParties:u,isPolling:m,answerStack:p})=>{let{getNicknameByUserId:f,parties:g,refreshParties:x}=(0,Q.L)(),b=(0,s.useMemo)(()=>Object(function(){var e=Error("Cannot find module '@/utils/playerColors'");throw e.code="MODULE_NOT_FOUND",e}())(g),[g]),h=(0,s.useMemo)(()=>{let o={};if(i){let e=(0,ea.q)(r,t,n),a=c?.seconds;o[i]={userId:i,nickname:"You",percentage:e,isCurrentUser:!0,finishTime:a,isPuzzleCheated:100===e&&(0,ew.k)(p)}}return Object.values(e).forEach(e=>{e?.memberSessions&&Object.entries(e.memberSessions).forEach(([e,r])=>{let t;if(e===i||o[e])return;let n=r?(0,ea.q)(r.state.initial,r.state.final,r.state.answerStack[r.state.answerStack.length-1]):0;r?.state.completed&&(t=r.state.completed.seconds);let a=f(e)||"";a?o[e]={userId:e,nickname:a,percentage:n,isCurrentUser:!1,finishTime:t,isPuzzleCheated:100===n&&!!r&&(0,ew.k)(r.state.answerStack)}:x()})}),Object.values(o).sort((e,r)=>r.percentage-e.percentage)},[e,r,t,n,i,f,x,c,p]),v=(0,s.useMemo)(()=>h.filter(e=>!e.isPuzzleCheated&&100===e.percentage&&e.finishTime).sort((e,r)=>e.finishTime-r.finishTime),[h]),y=(0,s.useMemo)(()=>h.find(e=>e.isCurrentUser),[h]),w=y?.percentage===100&&!(0,ew.k)(p);return(0,o.jsxs)("div",{className:"mx-auto mt-2 mb-2 w-full max-w-xl lg:mt-4 lg:mr-0",children:[(0,o.jsxs)("div",{className:"relative cursor-pointer",onClick:()=>l&&l(),title:"Click to view friends",children:[(0,o.jsxs)("div",{className:"relative h-10 overflow-visible rounded-lg bg-stone-100 lg:h-14 dark:bg-gray-800",children:[o.jsx(ev,{countdown:d}),o.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-stone-200 via-stone-100 to-stone-200 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:o.jsx("div",{className:"absolute top-1/2 right-16 left-6 h-0.5 -translate-y-1/2 transform bg-white opacity-60",style:{backgroundImage:"repeating-linear-gradient(to right, white 0px, white 6px, transparent 6px, transparent 12px)"}})}),o.jsx("div",{className:"absolute top-1/2 left-1 -translate-y-1/2 transform",children:o.jsx("span",{className:"rounded bg-green-600 px-1.5 py-0.5 text-xs font-bold text-white",children:"START"})}),(0,o.jsxs)("div",{className:"absolute top-1/2 right-1 flex -translate-y-1/2 transform items-center",children:[o.jsx("span",{className:"mr-1 rounded bg-red-600 px-1 py-0.5 text-xs font-bold text-white",children:"FINISH"}),o.jsx("div",{className:"h-3 w-4 border border-gray-800 bg-white",style:{backgroundImage:`
                  linear-gradient(45deg, black 25%, transparent 25%),
                  linear-gradient(-45deg, black 25%, transparent 25%),
                  linear-gradient(45deg, transparent 75%, black 75%),
                  linear-gradient(-45deg, transparent 75%, black 75%)
                `,backgroundSize:"2px 2px",backgroundPosition:"0 0, 0 1px, 1px -1px, -1px 0px"}})]}),[25,50,75].map(e=>o.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-yellow-400 opacity-40",style:{left:`${e}%`}},e)),h.map((e,r)=>{let t=Object(function(){var e=Error("Cannot find module '@/utils/playerColors'");throw e.code="MODULE_NOT_FOUND",e}())(e.userId,b,e.isCurrentUser),n=window.innerWidth>=1024?56:40,a=h.length;return o.jsx("div",{className:"absolute transform transition-all duration-700 ease-out",style:{left:`${Math.min(Math.max(.83*e.percentage+12,12),95)}%`,top:`${r*Math.min(8,n/a)+2}px`,transform:"translateX(-50%)"},children:(0,o.jsxs)("div",{className:`h-3 w-5 ${t} relative rounded border border-gray-800 shadow-sm dark:border-gray-200`,children:[o.jsx("div",{className:"absolute top-0 -left-0.5 h-0.5 w-0.5 rounded-full bg-gray-800 dark:bg-gray-200"}),o.jsx("div",{className:"absolute top-0 -right-0.5 h-0.5 w-0.5 rounded-full bg-gray-800 dark:bg-gray-200"}),o.jsx("div",{className:"absolute bottom-0 -left-0.5 h-0.5 w-0.5 rounded-full bg-gray-800 dark:bg-gray-200"}),o.jsx("div",{className:"absolute -right-0.5 bottom-0 h-0.5 w-0.5 rounded-full bg-gray-800 dark:bg-gray-200"}),o.jsx("div",{className:"absolute top-0.5 left-1/2 h-1.5 w-1.5 -translate-x-1/2 transform rounded-full bg-yellow-300"}),e.isCurrentUser&&o.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 transform text-xs",children:"\uD83D\uDC51"})]})},e.userId)})]}),o.jsx("div",{className:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm",children:[...h].reverse().map(e=>{let r=Object(function(){var e=Error("Cannot find module '@/utils/playerColors'");throw e.code="MODULE_NOT_FOUND",e}())(e.userId,b,e.isCurrentUser);return(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:`h-2 w-2 rounded-full ${r}`}),(0,o.jsxs)("span",{className:`font-medium ${e.isCurrentUser?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:[e.nickname,e.isCurrentUser&&" \uD83D\uDC51"]}),(0,o.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["(",e.percentage,"%)"]})]},`${e.userId}-info`)})}),v.length>0&&o.jsx("div",{className:"mt-4",children:o.jsx("div",{className:"mt-2 rounded-lg bg-stone-100 p-2 dark:bg-gray-800",children:v.map((e,r)=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-1",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsxs)("span",{className:"mr-2 w-6 text-center font-bold",children:[r+1,"."]}),o.jsx("span",{className:e.isCurrentUser?"font-bold":"",children:e.nickname})]}),o.jsx("span",{className:"font-mono",children:(0,a.ZC)(e.finishTime)})]},e.userId))})})]}),w&&(0,o.jsxs)("div",{className:"mt-4 mb-8 space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)(ey.default,{href:`/?tab=${a.Tab.FRIENDS}`,className:"bg-theme-primary hover:bg-theme-primary-dark inline-flex items-center rounded-full px-6 py-3 text-base font-bold text-white shadow-md transition-transform hover:scale-105",children:[o.jsx("span",{className:"mr-2 text-xl",role:"img","aria-label":"trophy",children:"\uD83C\uDFC6"}),"View Monthly Leaderboard"]}),v.length!==h.length&&o.jsx("button",{onClick:u,disabled:m,title:"Refresh scores",className:"inline-flex cursor-pointer items-center rounded-full bg-gray-200 p-3 font-bold text-gray-700 shadow-md transition-transform hover:scale-105 hover:bg-gray-300 disabled:cursor-not-allowed disabled:opacity-50",children:o.jsx(q,{className:`h-5 w-5 ${m?"animate-spin":""}`})})]}),y?.finishTime&&o.jsx("div",{className:"rounded-lg border border-purple-200 bg-purple-50 p-4 dark:border-purple-800 dark:bg-purple-900/20",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"mb-2 text-lg font-semibold text-purple-900 dark:text-purple-100",children:"\uD83C\uDFC1 Challenge friends to beat your time!"}),(0,o.jsxs)("div",{className:"mb-3 text-sm text-purple-700 dark:text-purple-300",children:["Your time:"," ",o.jsx("span",{className:"font-mono font-bold",children:(0,a.ZC)(y.finishTime)})]}),(0,o.jsxs)("button",{onClick:l,className:"inline-flex cursor-pointer items-center rounded-full bg-purple-600 px-6 py-3 text-base font-bold text-white shadow-md transition-transform hover:scale-105 hover:bg-purple-700",children:[o.jsx("span",{className:"mr-2 text-xl",role:"img","aria-label":"racing",children:"\uD83D\uDE80"}),"Invite Friends to Race"]})]})})]})]})},ek=(0,s.memo)(function(e){return ej(e)});function eO(){return(eO=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var eN=(0,s.forwardRef)(function(e,r){var t=e.color,n=e.size,o=void 0===n?24:n,a=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return i().createElement("svg",eO({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),i().createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),i().createElement("line",{x1:"9",y1:"3",x2:"9",y2:"21"}))});eN.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},eN.displayName="Sidebar";let eC=(0,s.memo)(function({friendsOnClick:e}){return(0,o.jsxs)("button",{onClick:e,className:"text-theme-primary dark:text-theme-primary-light cursor-pointer rounded-lg",children:[o.jsx(eN,{className:"float-left mr-2"}),"Races"]})});var ez=t(1043),eE=t(1497),eS=t(9555),eP=t(7600),eD=t(9365);let eT=({isOpen:e,onClose:r,onRaceMode:t,onSoloMode:n})=>o.jsx(es.u,{appear:!0,show:e,as:s.Fragment,children:(0,o.jsxs)(ei.V,{as:"div",className:"relative z-50",onClose:()=>{},children:[o.jsx(es.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),o.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:o.jsx(es.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,o.jsxs)(ei.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-3xl bg-white/95 p-6 text-left align-middle shadow-2xl backdrop-blur-md transition-all dark:bg-zinc-900/95",children:[(0,o.jsxs)("div",{className:"mb-6 text-center",children:[o.jsx("div",{className:"mb-4 flex justify-center",children:(0,o.jsxs)("div",{className:"relative",children:[o.jsx("div",{className:"flex h-16 w-16 animate-pulse items-center justify-center rounded-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500",children:o.jsx(eS.Z,{className:"h-8 w-8 text-white"})}),o.jsx("div",{className:"absolute -top-1 -right-1 flex h-6 w-6 items-center justify-center rounded-full bg-gradient-to-r from-yellow-400 to-orange-500",children:o.jsx(eP.Z,{className:"h-3 w-3 text-white"})})]})}),o.jsx(ei.V.Title,{className:"mb-2 text-2xl font-bold",children:o.jsx("span",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Choose Your Challenge Mode"})}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Compete with others or practice solo"})]}),(0,o.jsxs)("button",{onClick:()=>{t(),r()},className:"group relative mb-4 w-full transform cursor-pointer overflow-hidden rounded-2xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 p-5 text-white shadow-lg transition-all duration-300 hover:scale-[1.02] hover:shadow-xl active:scale-[0.98]",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,o.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex aspect-square h-12 w-12 items-center justify-center rounded-full bg-white/20 transition-colors group-hover:bg-white/30",children:o.jsx(er.Z,{className:"h-6 w-6"})}),(0,o.jsxs)("div",{className:"text-left",children:[o.jsx("div",{className:"mb-1 text-xl font-bold",children:"Race Friends and Family!"}),o.jsx("div",{className:"text-sm text-white/90",children:"Players can join anytime, but playing simultaneously gives the best racing experience"})]})]}),o.jsx(eD.Z,{className:"h-6 w-6 transition-transform group-hover:translate-x-1"})]}),o.jsx("div",{className:"absolute top-0 right-0 left-0 h-1 animate-ping bg-gradient-to-r from-transparent via-white/30 to-transparent"})]}),o.jsx("div",{className:"border-t border-gray-200 pt-4 dark:border-gray-700",children:o.jsx("button",{onClick:()=>{n(),r()},className:"w-full cursor-pointer rounded-xl px-4 py-3 text-sm text-gray-600 transition-all duration-200 hover:bg-gray-100 hover:text-gray-800 dark:text-gray-400 dark:hover:bg-zinc-800 dark:hover:text-gray-200",children:"Solo Challenge"})})]})})})})]})});(function(){var e=Error("Cannot find module '../CelebrationAnimation'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/hooks/useDrag'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '../AppDownloadModal/AppDownloadModal'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/providers/SessionsProvider/SessionsProvider'");throw e.code="MODULE_NOT_FOUND",e}();let eL=({puzzle:{initial:e,final:r,puzzleId:t,redirectUri:i,metadata:l},alreadyCompleted:d,showRacingPrompt:c=!0})=>{let u=(0,ez.useRouter)(),{user:m}=(0,s.useContext)(a.St)||{},{isSubscribed:f,subscribeModal:h}=(0,s.useContext)(a.lK)||{},{sessions:v}=Object(function(){var e=Error("Cannot find module '@/providers/SessionsProvider/SessionsProvider'");throw e.code="MODULE_NOT_FOUND",e}())(),{answer:y,answerStack:w,selectedCell:j,setIsNotesMode:k,isNotesMode:O,undo:N,redo:C,selectNumber:z,setSelectedCell:E,selectedAnswer:S,selectedCellHasNotes:P,isUndoDisabled:D,isRedoDisabled:T,validation:L,validateCell:U,validateGrid:M,timer:I,reset:_,reveal:R,completed:F,setPauseTimer:$,setTimerNewSession:A,refreshSessionParties:Z,sessionParties:B,showSidebar:q,setShowSidebar:W,isZoomMode:V,setIsZoomMode:G,isPolling:Y}=function({final:e,initial:r,puzzleId:t,metadata:o}){let{user:i}=(0,s.useContext)(a.St)||{},{subscribeModal:l,isSubscribed:d}=(0,s.useContext)(a.lK)||{};(0,a.xK)();let{timer:c,setTimerNewSession:u,stopTimer:m,setPauseTimer:p,isPaused:f}=function({puzzleId:e}){(0,a.xK)();let[r,t]=(0,s.useState)(!1),{getValue:o,saveValue:i}=(0,a._)({id:e,type:a.Yk.TIMER}),[l,d]=(0,s.useState)(null),c=(0,s.useCallback)(e=>{let r=new Date;r.setSeconds(r.getSeconds()+4);let t=r.toISOString();d(r=>{let n=void 0!==e?e:r;return{...n,seconds:(0,a.RP)(n),inProgress:{start:t,lastInteraction:t},...n?.stopped?void 0:{countdown:4}}})},[]),u=(0,s.useCallback)(()=>{n&&clearInterval(n),d(e=>e?{...e,stopped:!0}:null)},[d]);return(0,s.useCallback)(()=>{let e=new Date().toISOString();d(r=>r?r.stopped?(n&&clearInterval(n),r):r.countdown&&r.countdown>0?{...r,countdown:r.countdown-1}:{...r,inProgress:{...r.inProgress,lastInteraction:e}}:null)},[]),{setTimerNewSession:c,timer:l,stopTimer:u,setPauseTimer:t,isPaused:r}}({puzzleId:t}),x=(0,s.useRef)(c);(0,s.useRef)(0),(0,s.useRef)(0);let h=(0,s.useRef)(null),[v,y]=(0,s.useState)(!1),w=(0,s.useRef)(v),{getValue:j,saveValue:k}=(0,a._)({id:t,type:a.Yk.PUZZLE}),{getValue:O,saveValue:N}=(0,a.QP)({id:t,type:a.Yk.PUZZLE}),{parties:C}=(0,Q.L)(),{getSessionParties:z,patchFriendSessions:E}=(0,a.dL)(),[S,P]=(0,s.useState)(!1),[D,T]=(0,s.useState)(!1),[L,U]=(0,s.useState)(!1),[{answerStack:M,isRestored:I,isDisabled:_,completed:R},F]=(0,s.useState)({answerStack:[structuredClone(r)],isDisabled:!0}),[$,A]=(0,s.useState)([]),[Z,B]=(0,s.useState)(()=>{let e=z(C,`sudoku-${t}`);return console.info("initialSessionParties",e),e||{}}),q=(0,s.useCallback)(e=>{B(e);let r=Object.values(e||{}),n={};for(let e of r)e?.memberSessions&&Object.assign(n,e.memberSessions);E(`sudoku-${t}`,n)},[E,t]);Z&&Object.keys(Z).length;let[W,V]=(0,s.useState)(null),G=(0,s.useRef)(Date.now()),Y=(0,s.useCallback)(e=>{R||(G.current=Date.now(),w.current&&(y(!1),p(!1)),V(e))},[R,p]),H=(0,s.useCallback)(()=>({localValue:j(),serverValuePromise:O()}),[j,O]),K=(0,s.useCallback)(e=>e.slice(-3),[]),J=(0,s.useCallback)((e,r)=>r?e.slice(-2):e.slice(-10),[]);(0,s.useCallback)((e,r=!0)=>{if(e.answerStack.length>0){let r=e.answerStack[e.answerStack.length-1];if(!(!h.current||JSON.stringify(r)!==JSON.stringify(h.current)))return console.info("nothing changed skipping save"),{localValue:void 0,serverValuePromise:void 0};h.current=r}return{localValue:k({...e,answerStack:J(e.answerStack,e.completed)}),serverValuePromise:r?N({...e,answerStack:K(e.answerStack),timer:x.current||void 0}):void 0}},[k,N,x,K,J]),(0,s.useCallback)((e,r)=>{e&&r?.parties&&Object.keys(r.parties).length&&q(r.parties)},[q]);let X=M[M.length-1],ee=(0,s.useCallback)(t=>{let n;x.current?.inProgress?.lastInteraction&&g(r,e,t).isComplete&&(m(),n={at:x.current.inProgress.lastInteraction,seconds:(0,a.RP)(x.current)},Y(null)),F({answerStack:[...M,t],completed:n}),A([])},[M,r,e,m,Y]),er=(0,s.useCallback)(e=>{if(W){let{box:t,cell:n}=(0,a.gw)(W);if(!r[t.x][t.y][n.x][n.y]){let r=structuredClone(X);r[t.x][t.y][n.x][n.y]=e,ee(r)}}},[r,X,W,ee]),et=(0,s.useCallback)(()=>{A([]),F({answerStack:[structuredClone(r)]}),u(null)},[r,u]),en=(0,s.useCallback)(()=>{let r=()=>{ee(structuredClone(e))};l?l.showModalIfRequired(r,()=>{},"REVEAL"):r()},[ee,e,l]),eo=(0,s.useCallback)(e=>{if(W){let{box:t,cell:n}=(0,a.gw)(W);if(!r[t.x][t.y][n.x][n.y]){let r=X[t.x][t.y][n.x][n.y],o="object"==typeof r?r:{};o&&er({...o,[e]:!o[e]})}}},[r,X,W,er]),ea=(0,s.useCallback)((e,r)=>{0!==e&&(S||r)?eo(e):er(e)},[S,er,eo]),es=(0,s.useCallback)(()=>{if(W){let{box:e,cell:r}=(0,a.gw)(W),t=X[e.x][e.y][r.x][r.y];if("number"==typeof t)return t}},[X,W]),ei=(0,s.useCallback)(()=>{if(W){let{box:e,cell:r}=(0,a.gw)(W),t=X[e.x][e.y][r.x][r.y];if("object"==typeof t&&null!==t)return Object.values(t).some(e=>!0===e)}return!1},[X,W]),el=M.length<2,ed=(0,s.useCallback)(()=>{if(!el){let e=()=>{A([...$,M[M.length-1]]),F({answerStack:M.slice(0,M.length-1)}),d||(0,a.oF)()};d||(0,a.Jq)()?e():l&&l.showModalIfRequired(e,()=>{},"UNDO")}},[el,M,$,l,d]),ec=!$.length,eu=(0,s.useCallback)(()=>{ec||(F({answerStack:[...M,$[$.length-1]]}),A($.slice(0,$.length-1)))},[ec,M,$]),[em,ep]=(0,s.useState)(void 0),ef=(0,s.useCallback)(()=>{let t=()=>{em?ep(void 0):ep(g(r,e,X).validation),d||(0,a.Cx)()};d||(0,a.eC)()?t():l&&l.showModalIfRequired(t,()=>{},"CHECK_GRID")},[r,e,X,em,l,d]),eg=(0,s.useCallback)(()=>{W&&(em?ep(void 0):ep(b(W,r,e,X)))},[em,W,r,e,X]),[ex,eb]=(0,s.useState)(!1);return{answer:X,answerStack:M,selectedCell:W,setIsNotesMode:P,isNotesMode:S,undo:ed,redo:eu,selectNumber:ea,setSelectedCell:Y,selectedAnswer:es,selectedCellHasNotes:ei,isUndoDisabled:el,isRedoDisabled:ec,validation:em,validateCell:eg,validateGrid:ef,timer:c,reset:et,reveal:en,completed:R,setPauseTimer:p,setTimerNewSession:u,refreshSessionParties:(0,s.useCallback)(async()=>{eb(!0);try{let{serverValuePromise:e}=H()||{},r=await e;r?.parties&&Object.keys(r?.parties).length&&q(r.parties)}finally{eb(!1)}},[H,q]),isPolling:ex,sessionParties:Z,showSidebar:D,setShowSidebar:T,isZoomMode:L,setIsZoomMode:U}}({final:r,initial:e,puzzleId:t,metadata:l}),H=(0,s.useCallback)(()=>{W(e=>!e)},[W]),K=(0,s.useCallback)(()=>W(!0),[W]),X=(0,s.useRef)(null),[er,et]=(0,s.useState)(!1),[en,eo]=(0,s.useState)(!1),ea=(0,s.useMemo)(()=>!!(B&&m?.sub)&&Object.values(B).some(e=>!!e?.memberSessions&&Object.keys(e.memberSessions).some(e=>e!==m.sub)),[B,m?.sub]),[es,ei]=(0,s.useState)(!1),[el,ed]=(0,s.useState)(!1),[ec,eu]=(0,s.useState)(!1),[em,ep]=(0,s.useState)(!1);(0,s.useEffect)(()=>{ei(!d&&c&&!ea&&!ec),ed(d||ea)},[d,c,ea,ec]),(0,s.useEffect)(()=>{eu(!(0,a.WI)()&&!em)},[em]);let ef=(0,s.useMemo)(()=>v?v.filter(e=>e.state.completed).length:0,[v]),eg=(0,s.useCallback)(()=>{navigator.clipboard.writeText((0,eE.s)(y).replaceAll(".","0")).catch(e=>{console.error("Failed to copy grid:",e)})},[y]),ex=(0,s.useCallback)(()=>{ed(!0),W(!0)},[W]),eb=(0,s.useCallback)(()=>{ed(!0)},[]),ev=(0,s.useCallback)(()=>{eu(!1),ep(!0)},[]),ey=(0,s.useCallback)(()=>{eu(!1),ep(!0)},[]);(0,s.useEffect)(()=>{if(F&&!d&&!(0,ew.k)(w)){et(!0);let e=setTimeout(()=>{et(!1)},1e4);return()=>clearTimeout(e)}},[F,d,w]),(0,s.useEffect)(()=>{},[t,F,d]),(0,s.useEffect)(()=>{I?.countdown!==1||f||F||!(new Set().size>=a.qc.PUZZLE)||($(!0),h?.showModalIfRequired(()=>{A(),$(!1)},()=>{u.replace("/")},a.SubscriptionContext.DAILY_PUZZLE_LIMIT))},[u,I?.countdown,f,h,$,A,F]);let{dragOffset:ej,dragStarted:eO,zoomOrigin:eN,handleDragStart:eS}=Object(function(){var e=Error("Cannot find module '@/hooks/useDrag'");throw e.code="MODULE_NOT_FOUND",e}())({isZoomMode:V,selectedCell:j,gridRef:X});return(0,s.useEffect)(()=>{$(!el||q||es||ec),q||es||ec?document.body.classList.add("overflow-y-hidden"):document.body.classList.remove("overflow-y-hidden")},[el,q,es,ec,$]),(0,s.useEffect)(()=>()=>{document.body.classList.remove("overflow-y-hidden")},[]),(0,o.jsxs)("div",{className:`${en?"pb-120":"pb-90"} lg:pb-0 landscape:mb-120 sm:landscape:pb-[calc(60vh)] lg:landscape:mb-0 lg:landscape:pb-0`,children:[o.jsx(Object(function(){var e=Error("Cannot find module '../AppDownloadModal/AppDownloadModal'");throw e.code="MODULE_NOT_FOUND",e}()),{isOpen:ec,onClose:ev,onContinueWeb:ey}),o.jsx(eT,{isOpen:es,onClose:()=>ei(!1),onRaceMode:ex,onSoloMode:eb}),o.jsx(eh,{showSidebar:q,setShowSidebar:W,puzzleId:t,redirectUri:i,refreshSessionParties:Z,sessionParties:B}),F&&o.jsx(Object(function(){var e=Error("Cannot find module '../CelebrationAnimation'");throw e.code="MODULE_NOT_FOUND",e}()),{isVisible:er,gridRef:X,completedGamesCount:ef}),(0,o.jsxs)("div",{className:"flex flex-col items-center lg:flex-row",children:[o.jsx("div",{className:"container mx-auto px-4 pb-4 lg:pb-0",children:o.jsx("div",{className:"flex flex-col",children:(0,o.jsxs)("div",{className:"mt-auto",children:[o.jsx("div",{className:"mr-auto ml-auto max-w-xl px-4 pb-1 lg:mr-0",children:o.jsx("div",{className:"text-right",children:o.jsx("span",{className:"bg-theme-primary inline-flex items-center bg-clip-text text-sm text-transparent",children:"Sudoku Race"})})}),(0,o.jsxs)("div",{className:"mr-auto ml-auto flex max-w-xl px-4 pb-1 lg:mr-0",children:[o.jsx("div",{className:"flex-nowrap items-center xl:hidden",role:"group","aria-label":"Button group",children:o.jsx(eC,{friendsOnClick:H})}),o.jsx("div",{className:`grow text-right ${I?.countdown||F?"text-2xl":""}`,children:o.jsx(ee,{seconds:(0,a.RP)(I),countdown:I?.countdown,isComplete:!!F})})]}),o.jsx("div",{className:"relative overflow-visible lg:overflow-hidden",children:o.jsx("div",{ref:X,className:`border-theme-primary dark:border-theme-primary-light landscape:max-w-[calc(100dvh - 400px)] portrait:max-h-[calc(50dvh - 400px)] relative mr-auto ml-auto grid max-h-full max-w-xl grid-cols-3 grid-rows-3 border border-2 bg-zinc-50 lg:mr-0 portrait:max-w-[calc(50dvh)] dark:bg-zinc-900 ${eO?"cursor-grabbing":V&&j?"cursor-grab":""} ${eO?"":"transition-all duration-300"}`,style:{transform:V&&j?`scale(1.5) translate(${ej.x}px, ${ej.y}px)`:"scale(1)",transformOrigin:eN,touchAction:V?"none":"auto"},children:Array.from([,,,]).map((r,t)=>Array.from([,,,]).map((r,n)=>{let s=(0,a.Ao)(n,t);return o.jsx(p,{boxId:s,selectedCell:j,setSelectedCell:E,answer:y[n][t],selectNumber:z,validation:L&&L[n][t],initial:e[n][t],isZoomMode:V,onDragStart:eS},s)}))})}),!er&&o.jsx(ek,{sessionParties:B,initial:e,final:r,answer:y,userId:m?.sub||"guest",onClick:K,countdown:I?.countdown,completed:F,isPolling:Y,refreshSessionParties:Z,answerStack:w})]})})}),o.jsx("div",{className:"lg:container lg:mx-auto lg:basis-3/5",children:!F&&o.jsx("div",{className:"fixed inset-x-0 bottom-0 z-10 lg:relative",children:o.jsx(J,{isInputDisabled:!j||x(j,e),isValidateCellDisabled:!j||x(j,e)||!S(),isDeleteDisabled:!j||x(j,e)||!S()&&!P(),validateCell:U,validateGrid:M,isUndoDisabled:D,isRedoDisabled:T,undo:N,redo:C,selectNumber:z,isNotesMode:O,setIsNotesMode:k,isZoomMode:V,setIsZoomMode:G,reset:_,reveal:R,copyGrid:eg,onAdvancedToggle:eo,isSubscribed:f})})})]})]})};function eU(){let e=(0,ez.useSearchParams)();e.get("initial"),e.get("final");let r="true"===e.get("alreadyCompleted"),t="false"!==e.get("showRacingPrompt"),{requestWakeLock:n}=Object(function(){var e=Error("Cannot find module '@/hooks/useWakeLock'");throw e.code="MODULE_NOT_FOUND",e}())(),[a,i]=(0,s.useState)(null);return o.jsx("div",{children:a&&o.jsx(eL,{puzzle:a,alreadyCompleted:r,showRacingPrompt:t})})}function eM(){return o.jsx(s.Suspense,{children:o.jsx(eU,{})})}!function(){var e=Error("Cannot find module '@/hooks/useWakeLock'");throw e.code="MODULE_NOT_FOUND",e}()},1290:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var n=t(3227),o=t(970);let a=({initial:e,final:r,latest:t,transparent:a})=>n.jsx("div",{className:`mr-auto ml-auto grid max-w-xl grid-cols-3 grid-rows-3 border border-1 border-zinc-900 text-black lg:mr-0 dark:border-zinc-50 dark:text-white ${a?"":"bg-zinc-50 dark:bg-zinc-900"}`,children:Array.from([,,,]).map((a,s)=>Array.from([,,,]).map((a,i)=>{let l=(0,o.Ao)(i,s);return n.jsx("div",{className:"grid aspect-square grid-cols-3 grid-rows-3 border border-zinc-900 dark:border-zinc-50",children:Array.from([,,,]).map((a,d)=>Array.from([,,,]).map((a,c)=>{let u=(0,o.Dv)(l,c,d),m=e[i][s][c][d],p=r[i][s][c][d],f=t?.[i][s][c][d],g=!m&&f&&f===p,x=!m&&f&&"number"==typeof f&&f!==p;return n.jsx("div",{className:`flex aspect-square size-fit h-full w-full items-center justify-center border border-zinc-300 dark:border-zinc-400 ${g?"bg-green-500":""} ${x?"bg-red-500":""}`,children:m||""},u)}))},l)}))})},9827:(e,r,t)=>{"use strict";t.d(r,{q:()=>n});let n=(e,r,t)=>{if(!t)return 0;let n=[0,1,2],o=0,a=0;for(let s of n)for(let i of n)for(let l of n)for(let d of n)!e[s][i][l][d]&&(o++,t[s][i][l][d]===r[s][i][l][d]&&0!==t[s][i][l][d]&&a++);return 0===o?100:Math.round(a/o*100)}},3974:(e,r,t)=>{"use strict";t.d(r,{k:()=>n});let n=e=>{let r,t;if(Array.isArray(e))r=e,t=!0;else{if(!e.completed||!e.answerStack||e.answerStack.length<2)return!1;r=e.answerStack,t=void 0!==e.completed}if(!t||!r||r.length<2)return!1;let n=r[r.length-1],o=r[r.length-2],a=0;for(let e=0;e<3;e++)for(let r=0;r<3;r++)for(let t=0;t<3;t++)for(let s=0;s<3;s++){let i=n[e][r][t][s],l=o[e][r][t][s];if(JSON.stringify(i)!==JSON.stringify(l)&&++a>1)return!0}return!1}},1497:(e,r,t)=>{"use strict";t.d(r,{Q:()=>n,s:()=>o});let n=e=>{let r=[[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]]];for(let[t,n]of Object.entries([e.slice(0,9),e.slice(9,18),e.slice(18,27),e.slice(27,36),e.slice(36,45),e.slice(45,54),e.slice(54,63),e.slice(63,72),e.slice(72,81)]))for(let[e,o]of Object.entries([n.slice(0,3),n.slice(3,6),n.slice(6,9)]))for(let[n,a]of Object.entries(o.split(""))){let o=Number(e),s=Math.floor(Number(t)/3),i=Number(n),l=Number(t)%3;r[o][s][i][l]=Number(a.replace(".","0"))}return r},o=e=>{let r="";return Array.from([,,,]).map((t,n)=>{Array.from([,,,]).map((t,o)=>{Array.from([,,,]).map((t,a)=>{Array.from([,,,]).map((t,s)=>{let i=e[a][n][s][o];r=`${r}${"number"==typeof i&&i||"."}`})})})}),r}},4260:(e,r,t)=>{"use strict";t.d(r,{L:()=>a});var n=t(3677),o=t(626);function a({refreshSessionParties:e}={}){let r=(0,n.useContext)(o.p);if(!r)throw Error("useParties must be used within a PartiesProvider");let{parties:t,isLoading:a,showCreateParty:s,setShowCreateParty:i,isSaving:l,memberNickname:d,setMemberNickname:c,partyName:u,setPartyName:m,saveParty:p,updateParty:f,getNicknameByUserId:g,refreshParties:x,lazyLoadParties:b,leaveParty:h,removeMember:v,deleteParty:y}=r;return{parties:t,isLoading:a,showCreateParty:s,setShowCreateParty:i,isSaving:l,memberNickname:d,setMemberNickname:c,partyName:u,setPartyName:m,saveParty:p,updateParty:f,refreshParties:async()=>x(e),getNicknameByUserId:g,leaveParty:h,removeMember:v,deleteParty:y}}},2473:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var n=t(3677),o=t.n(n),a=t(6047),s=t.n(a);function i(){return(i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var l=(0,n.forwardRef)(function(e,r){var t=e.color,n=e.size,a=void 0===n?24:n,s=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return o().createElement("svg",i({ref:r,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),o().createElement("polyline",{points:"6 9 12 15 18 9"}))});l.propTypes={color:s().string,size:s().oneOfType([s().string,s().number])},l.displayName="ChevronDown";let d=l},9365:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var n=t(3677),o=t.n(n),a=t(6047),s=t.n(a);function i(){return(i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var l=(0,n.forwardRef)(function(e,r){var t=e.color,n=e.size,a=void 0===n?24:n,s=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return o().createElement("svg",i({ref:r,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),o().createElement("polyline",{points:"9 18 15 12 9 6"}))});l.propTypes={color:s().string,size:s().oneOfType([s().string,s().number])},l.displayName="ChevronRight";let d=l},7600:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var n=t(3677),o=t.n(n),a=t(6047),s=t.n(a);function i(){return(i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var l=(0,n.forwardRef)(function(e,r){var t=e.color,n=e.size,a=void 0===n?24:n,s=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,["color","size"]);return o().createElement("svg",i({ref:r,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),o().createElement("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}))});l.propTypes={color:s().string,size:s().oneOfType([s().string,s().number])},l.displayName="Zap";let d=l},5024:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(3189).createProxy)(String.raw`/home/node/git/sudoku-web/apps/sudoku/src/app/puzzle/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[522,395,443,147],()=>t(2314));module.exports=n})();