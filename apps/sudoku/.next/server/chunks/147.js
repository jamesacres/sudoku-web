exports.id=147,exports.ids=[147],exports.modules={2635:(e,t,r)=>{Promise.resolve().then(r.bind(r,3592)),Promise.resolve().then(r.bind(r,6004)),Promise.resolve().then(r.bind(r,6632)),Promise.resolve().then(r.bind(r,3476)),Promise.resolve().then(r.bind(r,1032)),Promise.resolve().then(r.bind(r,1403)),Promise.resolve().then(r.bind(r,2789)),Promise.resolve().then(r.bind(r,6506)),Promise.resolve().then(r.bind(r,281)),Promise.resolve().then(r.bind(r,3649)),Promise.resolve().then(r.bind(r,1124)),Promise.resolve().then(r.bind(r,6420)),Promise.resolve().then(r.bind(r,9084)),Promise.resolve().then(r.bind(r,6651)),Promise.resolve().then(r.bind(r,8516)),Promise.resolve().then(r.bind(r,7071)),Promise.resolve().then(r.bind(r,112)),Promise.resolve().then(r.bind(r,5711)),Promise.resolve().then(r.bind(r,615)),Promise.resolve().then(r.bind(r,6372)),Promise.resolve().then(r.bind(r,9673)),Promise.resolve().then(r.bind(r,9831)),Promise.resolve().then(r.bind(r,9401)),Promise.resolve().then(r.bind(r,6234)),Promise.resolve().then(r.bind(r,7572)),Promise.resolve().then(r.bind(r,9681)),Promise.resolve().then(r.bind(r,4040)),Promise.resolve().then(r.bind(r,3307)),Promise.resolve().then(r.bind(r,2014))},8420:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},3245:()=>{},3592:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>i});var a=r(3227),s=r(970),o=r(626),n=r(6808);!function(){var e=Error("Cannot find module '@/providers/SessionsProvider/SessionsProvider'");throw e.code="MODULE_NOT_FOUND",e}();var l=r(8910);function i({children:e}){return a.jsx(s.MC,{children:a.jsx(s.c6,{children:a.jsx(s.Wn,{children:a.jsx(s.dr,{children:a.jsx(s.NG,{children:a.jsx(o.Z,{children:a.jsx(Object(function(){var e=Error("Cannot find module '@/providers/SessionsProvider/SessionsProvider'");throw e.code="MODULE_NOT_FOUND",e}()),{children:a.jsx(n.v,{children:a.jsx(l.f,{attribute:"class",children:a.jsx(s.eb,{children:e})})})})})})})})})})}},6004:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(3227),s=r(970),o=r(9101),n=r(3677),l=r(546),i=r(8289);let c={[s.SubscriptionContext.UNDO]:{bgColor:"bg-orange-50 dark:bg-orange-900/20",textColor:"text-orange-800 dark:text-orange-200",content:(0,a.jsxs)(a.Fragment,{children:["\uD83D\uDCC5 ",a.jsx("strong",{children:"You’ve reached your daily undo limit!"})," You get"," ",s.qc.UNDO," free undos per day. The limit resets tomorrow, or subscribe for unlimited undos."]})},[s.SubscriptionContext.CHECK_GRID]:{bgColor:"bg-orange-50 dark:bg-orange-900/20",textColor:"text-orange-800 dark:text-orange-200",content:(0,a.jsxs)(a.Fragment,{children:["\uD83D\uDCC5 ",a.jsx("strong",{children:"You’ve reached your daily grid check limit!"})," ","You get ",s.qc.CHECK_GRID," free grid checks per day. The limit resets tomorrow, or subscribe for unlimited checks."]})},[s.SubscriptionContext.REVEAL]:{bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-800 dark:text-blue-200",content:(0,a.jsxs)(a.Fragment,{children:["\uD83D\uDD13 ",a.jsx("strong",{children:"Reveal grid is a premium feature!"})," Subscribe to unlock the ability to reveal the complete solution."]})},[s.SubscriptionContext.THEME_COLOR]:{bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-800 dark:text-purple-200",content:(0,a.jsxs)(a.Fragment,{children:["\uD83C\uDFA8 ",a.jsx("strong",{children:"Premium theme colors are subscription-only!"})," ","Subscribe to unlock all beautiful theme colors and personalise your sudoku experience."]})},[s.SubscriptionContext.DAILY_PUZZLE_LIMIT]:{bgColor:"bg-green-50 dark:bg-green-900/20",textColor:"text-green-800 dark:text-green-200",content:(0,a.jsxs)(a.Fragment,{children:["\uD83E\uDDE9 ",a.jsx("strong",{children:"You’ve reached your daily puzzle limit!"})," Free users can play ",s.qc.PUZZLE," puzzle per day. The limit resets tomorrow, or subscribe for unlimited puzzles."]})},[s.SubscriptionContext.REMOVE_MEMBER]:{bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-800 dark:text-purple-200",content:(0,a.jsxs)(a.Fragment,{children:["\uD83D\uDC65"," ",a.jsx("strong",{children:"Removing members from your party is a premium feature!"})," ","Subscribe to unlock advanced party management features including member removal."]})},[s.SubscriptionContext.MULTIPLE_PARTIES]:{bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-800 dark:text-blue-200",content:(0,a.jsxs)(a.Fragment,{children:["\uD83C\uDFD8️ ",a.jsx("strong",{children:"Multiple racing teams is a premium feature!"})," Free users can have one team. Subscribe to create and join unlimited teams for family, friends, and more."]})},[s.SubscriptionContext.PARTY_MAX_SIZE]:{bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-800 dark:text-purple-200",content:(0,a.jsxs)(a.Fragment,{children:["\uD83D\uDC65 ",a.jsx("strong",{children:"Large parties is a premium feature!"})," Subscribe to unlock advanced party management features including large parties."]})}},d=()=>{let e,t;let{isLoading:r,isSubscribed:d,packages:u,purchasePackage:m,restorePurchases:h,subscribeModal:p}=(0,n.useContext)(s.lK)||{},x=u?.find(e=>e.identifier.toLowerCase().includes("monthly")),b=u?.find(e=>e.identifier.toLowerCase().includes("lifetime"));(0,s.WI)()?(e=x?.product.priceString,t=b?.product.priceString):(0,s.d)()||(e=x?.webBillingProduct.currentPrice.formattedPrice,t=b?.webBillingProduct.currentPrice.formattedPrice);let[g,f]=(0,n.useState)("monthly");if(!p?.isOpen||r||d)return null;let y=s._k;return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:()=>{p?.hideModal(),p.cancelCallback()}}),(0,a.jsxs)("div",{className:"relative flex max-h-[90vh] w-full max-w-md flex-col rounded-2xl border border-white/20 bg-white/95 shadow-2xl backdrop-blur-xl dark:border-gray-700/50 dark:bg-gray-900/95",children:[a.jsx("button",{onClick:()=>{p?.hideModal(),p.cancelCallback()},className:"absolute top-4 right-4 z-10 cursor-pointer rounded-full p-2 text-gray-400 backdrop-blur-sm transition-all hover:bg-gray-200/80 hover:text-gray-600 dark:hover:bg-gray-700/80 dark:hover:text-gray-300","aria-label":"Close modal",children:a.jsx(l.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-6 px-6 pt-2 text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full",children:a.jsx(o.default,{src:"/icons/icon-512.webp",alt:"Sudoku Icon",width:512,height:512})}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Join"," ",(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 px-3 py-1 text-sm font-semibold text-white shadow-lg",children:[a.jsx("span",{className:"mr-1",children:"✨"}),"Sudoku Plus",a.jsx("span",{className:"ml-1",children:"✨"})]})," ","to ",a.jsx("span",{className:"font-semibold",children:"remove all speed limits"}),"!"," ","Challenge friends, climb leaderboards, and improve your solving speed. Keep it ad free! Your support is much appreciated."]})]}),a.jsx("div",{className:"px-6",children:(e=>{if(!e)return null;let t=c[e];return t?a.jsx("div",{className:`mb-4 rounded-lg p-3 ${t.bgColor}`,children:a.jsx("p",{className:`text-sm ${t.textColor}`,children:t.content})}):null})(p?.context)}),(0,a.jsxs)("div",{className:"mb-6 space-y-3 px-6",children:[(0,a.jsxs)("div",{className:`flex cursor-pointer items-center justify-between rounded-xl border-2 p-4 ${"lifetime"===g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-700"}`,onClick:()=>f("lifetime"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`flex h-6 w-6 items-center justify-center rounded-full ${"lifetime"===g?"bg-blue-500 text-white":"border-2 border-gray-300 dark:border-gray-500"}`,children:"lifetime"===g&&a.jsx(i.Z,{className:"h-4 w-4"})}),a.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:"Lifetime"})]}),a.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:t})]}),(0,a.jsxs)("div",{className:`flex cursor-pointer items-center justify-between rounded-xl border-2 p-4 ${"monthly"===g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-700"}`,onClick:()=>f("monthly"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`flex h-6 w-6 items-center justify-center rounded-full ${"monthly"===g?"bg-blue-500 text-white":"border-2 border-gray-300 dark:border-gray-500"}`,children:"monthly"===g&&a.jsx(i.Z,{className:"h-4 w-4"})}),a.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:"Monthly"})]}),(0,a.jsxs)("span",{className:"font-bold text-gray-900 dark:text-white",children:[e,"/month"]})]})]}),(0,a.jsxs)("div",{className:"mb-6 px-6",children:[a.jsx("h3",{className:"mb-4 text-sm font-semibold tracking-wide text-gray-500 uppercase dark:text-gray-400",children:"What's Included"}),a.jsx("div",{className:"space-y-4 pb-4",children:y.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 rounded-lg bg-white p-3 dark:bg-gray-700",children:[a.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-blue-500 text-white",children:e.icon}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),e.description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]},t))})]})]}),a.jsx("div",{className:"flex-shrink-0 rounded-b-2xl border-t-2 border-gray-300/70 bg-white/95 shadow-[0_-16px_32px_-4px_rgba(0,0,0,0.4)] backdrop-blur-xl dark:border-gray-600/70 dark:bg-gray-900/95",children:(0,a.jsxs)("div",{className:"space-y-3 px-6 py-4",children:[a.jsx("button",{className:"w-full cursor-pointer rounded-xl bg-blue-500 py-4 font-semibold text-white transition-colors hover:bg-blue-600 active:bg-blue-700",onClick:async()=>{if(g&&m&&b&&x){let e=await m("lifetime"===g?b:x);p.hideModal(),e&&p.callback()}},children:"Continue"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx("button",{className:"flex-1 cursor-pointer py-2 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-500 dark:hover:text-gray-300",onClick:async()=>{if(h){let e=await h();p.hideModal(),e&&p.callback()}},children:"Restore purchases"}),a.jsx("button",{className:"flex-1 cursor-pointer py-2 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-500 dark:hover:text-gray-300",onClick:()=>{p?.hideModal(),p.cancelCallback()},children:"Cancel"})]})]})})]})]})}},6808:(e,t,r)=>{"use strict";r.d(t,{C:()=>u,v:()=>d});var a=r(3227),s=r(3677),o=r(970);let n=(0,s.createContext)(null),l=()=>{let e=new Date(new Date().toISOString()).toLocaleString("en-US",{month:"long",timeZone:"UTC"}),t=new Date().getFullYear();return`sudoku_book_${t}_${e}`},i=()=>{try{let e=l(),t=localStorage.getItem(e);if(t){let e=JSON.parse(t);return{...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),expiresAt:e.expiresAt?new Date(e.expiresAt):void 0}}}catch(e){console.warn("Failed to load cached book data:",e)}return null},c=e=>{try{let t=l();localStorage.setItem(t,JSON.stringify(e));let r=new Date().getFullYear(),a=["January","February","March","April","May","June","July","August","September","October","November","December"];a.forEach(e=>{let a=`sudoku_book_${r}_${e}`;a!==t&&localStorage.getItem(a)&&localStorage.removeItem(a)}),a.forEach(e=>{let t=`sudoku_book_${r-1}_${e}`;localStorage.getItem(t)&&localStorage.removeItem(t)})}catch(e){console.warn("Failed to save cached book data:",e)}},d=({children:e})=>{let[t,r]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),{getSudokuBookOfTheMonth:p}=(0,o.QP)(),{isOnline:x}=(0,o.sd)(),b=(0,s.useCallback)(async()=>{if(t||d)return;let e=i();if(e){r(e);return}u(!0),h(null);try{let e=await p();e?(r(e),c(e)):x?h("Failed to load puzzle book"):h("You are offline, please check your connection")}catch(e){console.error(e),h("Failed to load puzzle book")}finally{u(!1)}},[t,d,p,x]),g=(0,s.useCallback)(()=>{r(null),h(null);try{let e=l();localStorage.removeItem(e)}catch(e){console.warn("Failed to clear cached book data:",e)}},[]);return(0,s.useEffect)(()=>{let e=i();e&&!t&&r(e)},[t]),a.jsx(n.Provider,{value:{bookData:t,isLoading:d,error:m,fetchBookData:b,clearBookData:g},children:e})},u=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useBook must be used within a BookProvider");return e}},626:(e,t,r)=>{"use strict";r.d(t,{p:()=>n,Z:()=>l});var a=r(3227),s=r(3677),o=r(970);let n=(0,s.createContext)(void 0),l=({children:e})=>{let{user:t}=(0,s.useContext)(o.St)||{},{listParties:r,createParty:l,updateParty:i,leaveParty:c,removeMember:d,deleteParty:u}=(0,o.QP)({}),[m,h]=(0,s.useState)([]),[p,x]=(0,s.useState)(!1),[b,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[w,v]=(0,s.useState)(!1),[k,j]=(0,s.useState)(t?.given_name||t?.name||""),[S,C]=(0,s.useState)("");(0,s.useEffect)(()=>{j(t?.given_name||t?.name||"")},[t]),(0,s.useEffect)(()=>{g(!1),h([])},[t]);let N=(0,s.useCallback)(async e=>{if(e.memberNickname&&e.partyName){v(!0);let t=await l(e);return t&&h(e=>[...e,t]),j(""),C(""),y(!1),v(!1),t}},[l]),P=(0,s.useCallback)(async e=>{if(!t){console.warn("refreshParties not logged in");return}if(!p){b||g(!0),x(!0);let t=await r();return t&&h(t),e&&await e(),x(!1),t}return m},[r,p,m,b,t]),I=(0,s.useCallback)(e=>{for(let t of m){let r=t.members.find(t=>t.userId===e);if(r)return r.memberNickname}return null},[m]),T=(0,s.useCallback)(async e=>{let t=await c(e);return t&&h(t=>t.filter(t=>t.partyId!==e)),t},[c]),E=(0,s.useCallback)(async(e,t)=>{let r=await d(e,t);return r&&h(r=>r.map(r=>r.partyId===e?{...r,members:r.members.filter(e=>e.userId!==t)}:r)),r},[d]),A=(0,s.useCallback)(async(e,t)=>{let r=await i(e,t);return r&&h(r=>r.map(r=>r.partyId===e?{...r,...t}:r)),r},[i]),F=(0,s.useCallback)(async e=>{let t=await u(e);return t&&h(t=>t.filter(t=>t.partyId!==e)),t},[u]),$=(0,s.useCallback)(async()=>{if(!b&&!p&&t){console.info("loadParties (lazy)"),g(!0),x(!0);let e=await r();e&&h(e),x(!1)}},[b,p,r,t]);return a.jsx(n.Provider,{value:{parties:m,isLoading:p,showCreateParty:f,setShowCreateParty:y,isSaving:w,memberNickname:k,setMemberNickname:j,partyName:S,setPartyName:C,saveParty:N,updateParty:A,refreshParties:P,lazyLoadParties:$,getNicknameByUserId:I,leaveParty:T,removeMember:E,deleteParty:F},children:e})}},6632:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var a=r(3227),s=r(402),o=r(6668),n=r(3677),l=r(5132),i=r(9267),c=r(4672),d=r(9101);let u=({isOpen:e,onClose:t,onContinueWeb:r})=>{if((0,c.WI)())return null;let u="undefined"!=typeof navigator?navigator.userAgent:"",m=/iPad|iPhone|iPod/.test(u)&&!(0,c.WI)(),h=/Android/.test(u)&&!(0,c.WI)(),p=m||h;return a.jsx(s.u,{appear:!0,show:e,as:n.Fragment,children:(0,a.jsxs)(o.V,{as:"div",className:"relative z-50",onClose:()=>{},children:[a.jsx(s.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:a.jsx(s.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(o.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-3xl bg-white/95 p-6 text-left align-middle shadow-2xl backdrop-blur-md transition-all dark:bg-zinc-900/95",children:[(0,a.jsxs)("div",{className:"mb-6 text-center",children:[a.jsx("div",{className:"mb-4 flex justify-center",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"flex h-16 w-16 animate-pulse items-center justify-center rounded-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500",children:a.jsx(l.Z,{className:"h-8 w-8 text-white"})}),a.jsx("div",{className:"absolute -top-1 -right-1 flex h-6 w-6 items-center justify-center rounded-full bg-gradient-to-r from-green-400 to-blue-500",children:a.jsx(i.Z,{className:"h-3 w-3 text-white"})})]})}),a.jsx(o.V.Title,{className:"mb-2 text-2xl font-bold",children:a.jsx("span",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Did you know you can continue in our mobile app?"})}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:p?"Get the best racing experience with our Sudoku Race app!":"Download Sudoku Race"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(m||!p)&&a.jsx("button",{onClick:()=>{window.open("https://apps.apple.com/app/sudoku-race/id6517357180","_blank")},className:"block w-full cursor-pointer transition-transform hover:scale-105 active:scale-95",children:a.jsx(d.default,{src:"/badges/download-on-app-store.svg",alt:"Download on the App Store",className:"mx-auto h-14 w-auto",width:168,height:56})}),(h||!p)&&a.jsx("button",{onClick:()=>{window.open("https://play.google.com/store/apps/details?id=com.bubblyclouds.sudoku","_blank")},className:"block w-full cursor-pointer transition-transform hover:scale-105 active:scale-95",children:a.jsx(d.default,{src:"/badges/get-it-on-google-play.svg",alt:"Get it on Google Play",className:"mx-auto h-14 w-auto",width:168,height:56})})]}),p&&(0,a.jsxs)("div",{className:"mt-4 text-center",children:[a.jsx("p",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Already got the app?"}),a.jsx("button",{onClick:()=>{let e=window.location.pathname+window.location.search,t=`com.bubblyclouds.sudoku://-${e}`;window.location.href=t},className:"w-full cursor-pointer rounded-xl bg-blue-100 px-4 py-3 text-sm font-medium text-blue-700 transition-all duration-200 hover:bg-blue-200 active:scale-95 dark:bg-blue-900/30 dark:text-blue-300 dark:hover:bg-blue-900/50",children:"Open Puzzle"})]}),a.jsx("div",{className:"mt-4 border-t border-gray-200 pt-4 dark:border-gray-700",children:a.jsx("button",{onClick:()=>{r(),t()},className:"w-full cursor-pointer rounded-xl px-4 py-3 text-sm text-gray-600 transition-all duration-200 hover:bg-gray-100 hover:text-gray-800 dark:text-gray-400 dark:hover:bg-zinc-800 dark:hover:text-gray-200",children:p?"Continue in browser":"Continue on desktop"})})]})})})})]})})}},3476:(e,t,r)=>{"use strict";r.d(t,{CelebrationAnimation:()=>i});var a=r(3227),s=r(3677),o=r(7319),n=r(4672);let l=["#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#9400D3","#FF1493","#00FFFF","#FF00FF","#FFFF00","#32CD32","#FF4500","#8A2BE2","#00BFFF","#FF69B4"],i=({isVisible:e,gridRef:t,completedGamesCount:r=0})=>{let[i,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(e&&t?.current){let e=t.current;e.style.visibility="hidden",u(!0);let a=e.querySelectorAll("[data-cell-id]"),s=[],i=0;a.forEach(t=>{let r=t.textContent?.trim();if(!r)return;let a=t.getBoundingClientRect(),o=e.getBoundingClientRect(),n=o.left+o.width/2,c=o.top+o.height/2,d=a.left+a.width/2-n,u=a.top+a.height/2-c,m=Math.sqrt(d*d+u*u)||1,h=l[Math.floor(Math.random()*l.length)],p=`0 0 8px ${h}, 0 0 12px ${h}, 0 0 16px ${h}`;s.push({id:i++,x:a.left,y:a.top,content:r,color:h,directionX:d/m+(.4*Math.random()-.2),directionY:u/m+(.4*Math.random()-.2),rotation:720*Math.random()-360,size:.9+.4*Math.random(),glow:p})}),c(s);let d=setTimeout(()=>{e&&(e.style.visibility="visible"),u(!1);try{(0,n.WI)()&&2===r&&o.Q.requestReview().catch(e=>{console.error(e)})}catch(e){console.error("Error requesting app review:",e)}},9e3);return()=>{clearTimeout(d),e&&(e.style.visibility="visible")}}},[e,t,r]),e&&d)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"pointer-events-none fixed inset-0 z-50 overflow-hidden",children:[Array.from({length:25}).map((e,t)=>a.jsx("div",{className:"absolute h-4 w-4 rounded-full",style:{left:`${10+80*Math.random()}%`,top:`${10+80*Math.random()}%`,backgroundColor:l[Math.floor(Math.random()*l.length)],animation:`firework-burst 2s ease-out ${7*Math.random()}s forwards`,boxShadow:"0 0 20px 4px currentColor"}},t)),a.jsx("style",{children:`
          @keyframes firework-burst {
            0% {
              transform: scale(0);
              opacity: 1;
            }
            50% {
              transform: scale(1.5);
              opacity: 0.8;
            }
            100% {
              transform: scale(2);
              opacity: 0;
            }
          }
        `})]}),(0,a.jsxs)("div",{className:"pointer-events-none fixed inset-0 z-50 overflow-hidden",children:[i.map(e=>a.jsx("div",{className:"fixed flex items-center justify-center text-center text-xl font-bold sm:text-3xl",style:{left:`${e.x}px`,top:`${e.y}px`,color:e.color,textShadow:e.glow,width:"40px",height:"40px",animation:`number-explode-${e.id} 7s ease-out forwards`,transformOrigin:"center",zIndex:9999,transform:`scale(${e.size})`},children:e.content},e.id)),a.jsx("style",{children:`
          ${i.map(e=>`
            @keyframes number-explode-${e.id} {
              0% {
                transform: scale(${e.size}) translate(0, 0) rotate(0);
                opacity: 1;
              }
              /* Hold in place for 2 seconds (28.6% of 7 seconds) */
              28.6% {
                transform: scale(${e.size}) translate(0, 0) rotate(0);
                opacity: 1;
              }
              /* Start movement after 2 seconds */
              35% {
                transform: scale(${e.size}) translate(${50*e.directionX}px, ${50*e.directionY}px) rotate(${.1*e.rotation}deg);
                opacity: 1;
              }
              60% {
                opacity: 0.9;
              }
              85% {
                opacity: 0.7;
              }
              100% {
                transform: scale(${1.5*e.size}) translate(${800*e.directionX}px, ${800*e.directionY}px) rotate(${e.rotation}deg);
                opacity: 0;
              }
            }
          `).join("")}
        `})]})]}):null}},1032:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(3227),s=r(3677);class o extends s.Component{constructor(e){super(e),this.handleReload=()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},this.handleClearStorage=()=>{try{localStorage.clear(),console.log("localStorage cleared")}catch(e){console.error("Failed to clear localStorage:",e)}window.location.reload()},this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?a.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-white p-8 dark:bg-zinc-900",children:(0,a.jsxs)("div",{className:"max-w-md text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold text-red-600",children:"Oops! Something went wrong"}),a.jsx("p",{className:"mb-6 text-lg text-zinc-700 dark:text-zinc-300",children:"We encountered an unexpected error. Don't worry, your progress is saved!"}),this.state.error&&(0,a.jsxs)("details",{className:"mb-6 rounded bg-zinc-100 p-4 text-left text-sm dark:bg-zinc-800",children:[a.jsx("summary",{className:"cursor-pointer font-semibold text-zinc-800 dark:text-zinc-200",children:"Error Details"}),(0,a.jsxs)("pre",{className:"mt-2 overflow-auto text-xs text-red-600",children:[this.state.error.message,"\n\n",this.state.error.stack]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[a.jsx("button",{onClick:this.handleReload,className:"bg-theme-primary hover:bg-theme-primary-dark rounded px-6 py-3 font-semibold text-white transition-colors",children:"Reload App"}),a.jsx("button",{onClick:this.handleClearStorage,className:"rounded border border-zinc-300 bg-white px-6 py-3 font-semibold text-zinc-700 transition-colors hover:bg-zinc-100 dark:border-zinc-600 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700",children:"Clear Storage & Reload"})]}),a.jsx("p",{className:"mt-6 text-sm text-zinc-500",children:"If this problem persists, please contact support."})]})}):this.props.children}}let n=o},1403:(e,t,r)=>{"use strict";function a(){return null}r.d(t,{default:()=>a}),r(3677)},2789:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(3227),s=r(1043),o=r(7431);let n=()=>{let e=(0,s.useRouter)();return"/"===(0,s.usePathname)()?a.jsx("div",{className:"flex items-center",children:a.jsx("button",{className:"inline-flex cursor-pointer items-center bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-sm font-semibold text-transparent transition-opacity active:opacity-70",onClick:()=>e.replace("/?tab=START_PUZZLE"),children:"Sudoku Race"})}):(0,a.jsxs)("button",{className:"text-theme-primary dark:text-theme-primary-light flex w-16 cursor-pointer items-center transition-opacity active:opacity-70",type:"button",onClick:()=>e.replace("/"),children:[a.jsx(o.Z,{className:"h-5 w-5"}),a.jsx("span",{className:"text-base font-normal",children:"Back"})]})}},2630:(e,t,r)=>{"use strict";r(2789)},6506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(3227),s=r(112);r(3677);var o=r(8692),n=r(740);let l=()=>{let{isOnline:e}=(0,s.useOnline)();return a.jsx("button",{onClick:()=>{window.alert(`You are ${e?"online":"offline"}!`)},className:"text-theme-primary dark:text-theme-primary-light ml-1 h-8 w-8 cursor-pointer rounded-full bg-gray-100 p-1.5 transition-colors active:opacity-70 dark:bg-gray-800",children:e?a.jsx(o.Z,{className:"m-auto h-full w-full"}):a.jsx(n.Z,{className:"m-auto h-full w-full"})})}},281:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var a=r(3227),s=r(3677),o=r.n(s),n=r(1743),l=r(402),i=r(6668),c=r(8589),d=r(9101),u=r(6973);let m=({user:e,size:t,showRing:r=!1})=>{let s=r?t-4:t,o=e.picture?a.jsx(d.default,{src:e.picture,alt:e.name||"user",width:s,height:s,className:"overflow-hidden rounded-full"}):a.jsx("div",{className:"bg-theme-primary flex items-center justify-center rounded-full",style:{height:s,width:s},children:a.jsx(u.Z,{className:"text-white",style:{height:.6*s,width:.6*s}})});return r?a.jsx("div",{className:"rounded-full bg-gradient-to-r from-blue-500 via-red-500 via-yellow-500 to-green-500 p-0.5",style:{height:t+4,width:t+4},children:a.jsx("div",{className:"flex items-center justify-center rounded-full bg-white p-0.5 dark:bg-gray-800",children:o})}):o};var h=r(8168);let p=({isOpen:e,onClose:t,onConfirm:r})=>{let[o,n]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),u=async()=>{if(o){d(!0);try{await r(),t()}catch(e){console.error("Error deleting account:",e)}finally{d(!1)}}};return a.jsx(l.u,{appear:!0,show:e,as:s.Fragment,children:(0,a.jsxs)(i.V,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/25"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:a.jsx(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(i.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"mr-4 flex-shrink-0",children:a.jsx(h.Z,{className:"h-10 w-10 text-red-500"})}),a.jsx(i.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Account"})]}),a.jsx("div",{className:"mt-4",children:a.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone. All of your data across all Bubbly Clouds applications will be permanently deleted."})}),a.jsx("div",{className:"mt-4",children:(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",className:"text-theme-primary focus:ring-theme-primary h-4 w-4 rounded border-gray-300",checked:o,onChange:e=>n(e.target.checked)}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"I confirm that I want to delete my entire account including all data across all Bubbly Clouds applications."})]})}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[a.jsx("button",{type:"button",className:"focus-visible:ring-theme-primary inline-flex justify-center rounded-md border border-transparent bg-gray-100 px-4 py-2 text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",onClick:t,disabled:c,children:"Cancel"}),a.jsx("button",{type:"button",className:`inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ${o?"bg-red-600 hover:bg-red-700 focus-visible:ring-red-500":"cursor-not-allowed bg-red-300"}`,onClick:u,disabled:!o||c,children:c?"Deleting...":"Delete Account"})]})]})})})})]})})};var x=r(3408),b=r(434),g=r(8872),f=r(546);let y=()=>({deleteAccount:async()=>!1}),w=({user:e,logout:t,onClose:r,isMobile:o=!1})=>{let[n,l]=(0,s.useState)(!1),{deleteAccount:i}=y(),{isSubscribed:c,subscribeModal:d}=(0,s.useContext)(x.l)||{},u=async()=>{await i()?t():alert("Failed to delete account. Please try again later.")},h=({size:t,showSubtitle:r=!1})=>(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx(m,{user:e,size:t,showRing:!0}),(0,a.jsxs)("h2",{className:`${t>70?"mt-4 text-xl":"mt-3 text-lg"} font-medium`,children:["Hi, ",e.name?.split(" ")[0]||"User","!"]}),r&&a.jsx("p",{className:"text-sm text-gray-400",children:e.name||"User"})]}),w=()=>a.jsx(a.Fragment,{children:c?a.jsx("div",{className:"rounded-full border border-gray-600 bg-gray-700 px-6 py-3 text-center",children:(0,a.jsxs)("span",{className:"inline-flex items-center text-sm font-medium",children:[a.jsx("span",{className:"mr-2",children:"✨"}),"Sudoku Plus Active",a.jsx("span",{className:"ml-2",children:"✓"})]})}):a.jsx("button",{onClick:()=>d?.showModalIfRequired(()=>{}),className:"w-full cursor-pointer rounded-full border border-gray-600 bg-gray-700 px-6 py-3 text-sm font-medium transition-colors hover:bg-gray-600",children:"Join Sudoku Plus"})}),v=()=>(0,a.jsxs)("div",{className:`${c?"flex justify-center":"grid grid-cols-2 gap-3"}`,children:[!c&&(0,a.jsxs)("button",{onClick:()=>d?.showModalIfRequired(()=>{}),className:"flex cursor-pointer items-center justify-center rounded-2xl bg-gray-700 px-4 py-3 text-sm font-medium transition-colors hover:bg-gray-600",children:[a.jsx(b.Z,{size:16,className:"mr-2"}),"Join Plus"]}),(0,a.jsxs)("button",{onClick:()=>t(),className:`flex cursor-pointer items-center justify-center rounded-2xl bg-gray-700 px-4 py-3 text-sm font-medium transition-colors hover:bg-gray-600 ${c?"w-full max-w-xs":""}`,children:[a.jsx(g.Z,{size:16,className:"mr-2"}),"Sign out"]})]}),k=()=>(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-400",children:[a.jsx("a",{href:"https://bubblyclouds.com/privacy",target:"_blank",className:"hover:text-white",children:"Privacy policy"}),a.jsx("span",{children:"•"}),a.jsx("a",{href:"https://bubblyclouds.com/terms",target:"_blank",className:"hover:text-white",children:"Terms of Service"})]}),j=()=>a.jsx("button",{onClick:()=>l(!0),className:"w-full cursor-pointer text-center text-xs text-red-400 hover:text-red-300",children:"Delete account"}),S=()=>(0,a.jsxs)("div",{className:"border-t border-gray-700 px-6 py-3 text-center text-xs text-gray-500",children:["Powered by"," ",a.jsx("a",{href:"https://bubblyclouds.com/",target:"_blank",className:"hover:text-gray-300",children:"Bubbly Clouds"})]});return o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-full max-w-sm rounded-3xl bg-gray-800 text-white shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 pb-4",children:[a.jsx("div",{className:"text-lg font-medium text-gray-300",children:"Account"}),a.jsx("button",{onClick:r,className:"cursor-pointer text-gray-400 hover:text-white",children:a.jsx(f.Z,{size:20})})]}),a.jsx("div",{className:"px-6 py-4",children:a.jsx(h,{size:80})}),a.jsx("div",{className:"px-6 py-4",children:a.jsx(w,{})}),a.jsx("div",{className:"px-6 py-4",children:a.jsx(v,{})}),a.jsx("div",{className:"px-6 py-4",children:a.jsx(k,{})}),a.jsx("div",{className:"px-6 pb-4",children:a.jsx(j,{})}),a.jsx(S,{})]}),a.jsx(p,{isOpen:n,onClose:()=>l(!1),onConfirm:u})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-80 overflow-hidden rounded-2xl bg-gray-800 text-white shadow-2xl ring-1 ring-black/10",children:[a.jsx("div",{className:"px-6 py-6",children:a.jsx(h,{size:64,showSubtitle:!0})}),a.jsx("div",{className:"px-6 py-2",children:a.jsx(w,{})}),a.jsx("div",{className:"px-6 py-4",children:a.jsx(v,{})}),a.jsx("div",{className:"px-6 py-4",children:a.jsx(k,{})}),a.jsx("div",{className:"px-6 pb-4",children:a.jsx(j,{})}),a.jsx(S,{})]}),a.jsx(p,{isOpen:n,onClose:()=>l(!1),onConfirm:u})]})},v=({user:e,logout:t})=>{let[r,o]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.u,{appear:!0,show:r,as:s.Fragment,children:(0,a.jsxs)(i.V,{as:"div",className:"relative z-50 sm:hidden",onClose:()=>o(!1),children:[a.jsx(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:a.jsx(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsx(i.V.Panel,{children:a.jsx(w,{user:e,logout:t,onClose:()=>o(!1),isMobile:!0})})})})})]})}),a.jsx(c.J,{className:"relative",style:{height:32},children:({close:r})=>(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.J.Button,{className:"focus:outline-none",onClick:e=>{window.innerWidth<640&&(e.preventDefault(),o(!0))},children:a.jsx("div",{className:"mx-1 h-8 w-8 cursor-pointer rounded-full ring-2 ring-transparent transition-all hover:ring-gray-300 dark:hover:ring-gray-600",children:a.jsx(m,{user:e,size:32})})}),a.jsx(l.u,{as:s.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:a.jsx(c.J.Panel,{className:"absolute -right-10 z-50 mt-3 hidden transform sm:block",children:a.jsx(w,{user:e,logout:t,onClose:r,isMobile:!1})})})]})})]})};var k=r(112);let j=()=>{let{isLoggingIn:e,loginRedirect:t,logout:r,user:s}=o().useContext(n.S)||{},{isOnline:l}=(0,k.useOnline)();return s&&r?a.jsx(v,{user:s,logout:r}):l&&a.jsx("button",{disabled:e,onClick:()=>t&&t({userInitiated:!0}),className:`${e?"cursor-wait":""} bg-theme-primary disabled:bg-theme-primary-lighter mx-1 inline-block rounded-full px-4 py-1.5 text-sm font-medium text-white transition-opacity active:opacity-70`,children:"Sign in"})}},9085:(e,t,r)=>{"use strict";r(281)},3649:(e,t,r)=>{"use strict";r.d(t,{PremiumFeatures:()=>d});var a=r(3227),s=r(3677),o=r(3408),n=r(1890),l=r(8518),i=r(6211);let c=[];function d({className:e="",title:t="\uD83C\uDFC1 Premium Features",subtitle:r="Unlock the full Sudoku Race experience",compact:d=!1}){let{isSubscribed:u,subscribeModal:m}=(0,s.useContext)(o.l)||{},h=c.map(e=>({...e,icon:e.icon.type,isPremium:!u})),p=e=>{u||m?.showModalIfRequired(()=>{},()=>{},e)};return d?(0,a.jsxs)("div",{className:`${e}`,children:[t&&(0,a.jsxs)("div",{className:"mb-4 text-center",children:[a.jsx("h3",{className:"mb-1 text-lg font-bold text-gray-900 dark:text-white",children:t}),r&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[h.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:`flex items-center rounded-xl border bg-white/50 p-3 backdrop-blur-sm transition-all hover:bg-white/70 dark:bg-gray-800/50 dark:hover:bg-gray-800/70 ${e.isPremium?"cursor-pointer border-yellow-200 hover:border-yellow-300 dark:border-yellow-600":"border-green-200 dark:border-green-600"}`,onClick:()=>{e.isPremium&&p()},children:[a.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg ${e.isPremium?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-gradient-to-br from-green-500 to-green-600 text-white"}`,children:a.jsx(e.icon,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.title}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.description})]}),a.jsx("div",{className:"ml-2",children:e.isPremium?a.jsx(n.Z,{className:"h-4 w-4 text-gray-400"}):a.jsx(l.Z,{className:"h-4 w-4 text-green-500"})})]},t)),h.length>3&&(0,a.jsxs)("p",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:["+",h.length-3," more premium features"]})]})]}):(0,a.jsxs)("div",{className:`container mx-auto max-w-6xl px-6 py-6 md:py-8 ${e}`,children:[(0,a.jsxs)("div",{className:"mb-6 md:mb-8",children:[a.jsx("h2",{className:"mb-2 text-center text-xl font-bold text-gray-900 md:text-2xl dark:text-white",children:t}),a.jsx("p",{className:"text-center text-sm text-gray-600 md:text-base dark:text-gray-400",children:r})]}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2 md:gap-4 lg:grid-cols-3",children:h.map((e,t)=>(0,a.jsxs)("div",{className:`group relative rounded-2xl border-2 bg-white/80 p-4 shadow-lg backdrop-blur-xl transition-all hover:scale-105 hover:shadow-xl md:p-6 dark:bg-gray-800/80 ${e.isPremium?"cursor-pointer border-yellow-200 hover:border-yellow-300 dark:border-yellow-600":"border-green-200 dark:border-green-600"}`,onClick:()=>{e.isPremium&&p()},children:[e.isPremium&&a.jsx("div",{className:"absolute -top-2 -right-2 flex h-6 w-6 items-center justify-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg",children:a.jsx(i.Z,{className:"h-3 w-3"})}),(0,a.jsxs)("div",{className:"mb-3 flex items-center md:mb-4",children:[a.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-xl md:h-12 md:w-12 ${e.isPremium?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-gradient-to-br from-green-500 to-green-600 text-white"}`,children:a.jsx(e.icon,{className:"h-5 w-5 md:h-6 md:w-6"})}),a.jsx("div",{className:"ml-3 flex-1 md:ml-4",children:e.isPremium?a.jsx(n.Z,{className:"float-right h-4 w-4 text-gray-400"}):a.jsx(l.Z,{className:"float-right h-4 w-4 text-green-500"})})]}),a.jsx("h3",{className:"mb-2 text-base font-semibold text-gray-900 md:text-lg dark:text-white",children:e.title}),a.jsx("p",{className:"text-xs text-gray-600 md:text-sm dark:text-gray-400",children:e.description})]},t))})]})}},1124:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(3227),s=r(3677);function o(){let[e,t]=(0,s.useState)("");return e?a.jsx("div",{className:"mb-4 flex justify-center md:mb-6",children:a.jsx("div",{className:"max-w-md",children:a.jsx("div",{className:"animate-fade-in text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 rounded-full border border-white/10 bg-white/15 px-4 py-2 backdrop-blur-sm",children:[a.jsx("div",{className:"flex h-2 w-2 animate-pulse rounded-full bg-yellow-400"}),a.jsx("span",{className:"text-sm font-medium text-white/90",children:e})]})})})}):null}},6420:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var a,s=r(3227),o=r(7572),n=r(3408),l=r(3677);!function(e){e.UNDO="undo",e.CHECK_GRID="checkGrid",e.REVEAL="reveal",e.THEME_COLOR="themeColor",e.DAILY_PUZZLE_LIMIT="dailyPuzzleLimit",e.REMOVE_MEMBER="removeMember",e.MULTIPLE_PARTIES="multipleParties",e.PARTY_MAX_SIZE="maxSize"}(a||(a={}));let i=[{name:"blue",bg:"bg-blue-500",hover:"hover:bg-blue-600",hex:"#3b82f6"},{name:"red",bg:"bg-red-500",hover:"hover:bg-red-600",hex:"#ef4444"},{name:"green",bg:"bg-green-500",hover:"hover:bg-green-600",hex:"#22c55e"},{name:"purple",bg:"bg-purple-500",hover:"hover:bg-purple-600",hex:"#a855f7"},{name:"amber",bg:"bg-amber-500",hover:"hover:bg-amber-600",hex:"#f59e0b"},{name:"cyan",bg:"bg-cyan-500",hover:"hover:bg-cyan-600",hex:"#06b6d4"},{name:"pink",bg:"bg-pink-500",hover:"hover:bg-pink-600",hex:"#ec4899"},{name:"indigo",bg:"bg-indigo-500",hover:"hover:bg-indigo-600",hex:"#6366f1"},{name:"orange",bg:"bg-orange-500",hover:"hover:bg-orange-600",hex:"#f97316"},{name:"teal",bg:"bg-teal-500",hover:"hover:bg-teal-600",hex:"#14b8a6"},{name:"slate",bg:"bg-slate-500",hover:"hover:bg-slate-600",hex:"#64748b"},{name:"rose",bg:"bg-rose-500",hover:"hover:bg-rose-600",hex:"#f43f5e"},{name:"emerald",bg:"bg-emerald-500",hover:"hover:bg-emerald-600",hex:"#10b981"},{name:"sky",bg:"bg-sky-500",hover:"hover:bg-sky-600",hex:"#0ea5e9"},{name:"violet",bg:"bg-violet-500",hover:"hover:bg-violet-600",hex:"#8b5cf6"},{name:"lime",bg:"bg-lime-500",hover:"hover:bg-lime-600",hex:"#84cc16"},{name:"fuchsia",bg:"bg-fuchsia-500",hover:"hover:bg-fuchsia-600",hex:"#d946ef"},{name:"yellow",bg:"bg-yellow-500",hover:"hover:bg-yellow-600",hex:"#eab308"},{name:"stone",bg:"bg-stone-500",hover:"hover:bg-stone-600",hex:"#78716c"},{name:"zinc",bg:"bg-zinc-500",hover:"hover:bg-zinc-600",hex:"#71717a"}],c=()=>{let{themeColor:e,setThemeColor:t}=(0,o.useThemeColor)(),{isSubscribed:r,subscribeModal:c}=(0,l.useContext)(n.l)||{},[d,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(!1),[p,x]=(0,l.useState)(0),b=(0,l.useRef)(null),g=i.find(t=>t.name===e)||i[0];(0,l.useEffect)(()=>{h(!0);let e=0,t=setInterval(()=>{x(e=(e+1)%i.length)},200),r=setTimeout(()=>{h(!1),clearInterval(t)},3e3);return()=>{clearInterval(t),clearTimeout(r)}},[]),(0,l.useEffect)(()=>{let e=e=>{b.current&&!b.current.contains(e.target)&&u(!1)};return d&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]);let f=e=>{2>i.findIndex(t=>t.name===e)||r?(t(e),u(!1)):c?.showModalIfRequired(()=>{t(e),u(!1)},()=>{},a.THEME_COLOR)};return(0,s.jsxs)("div",{className:"relative",ref:b,children:[s.jsx("button",{"aria-label":"Change Theme Color",onClick:()=>u(!d),className:`mx-1 h-8 w-8 cursor-pointer rounded-full p-1.5 transition-colors active:opacity-70 ${g.bg} text-white`,style:m?{border:`3px solid ${i[p].hex}`}:void 0,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-full w-full",children:s.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-3a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"})})}),d&&s.jsx("div",{className:"absolute right-0 mt-2 w-42 rounded-md bg-white shadow-lg dark:bg-gray-800",children:s.jsx("div",{className:"flex flex-wrap gap-2 p-2",children:i.map((t,a)=>{let o=a>=2&&!r;return s.jsx("button",{onClick:()=>f(t.name),className:`relative h-8 w-8 cursor-pointer rounded-full ${t.bg} ${t.hover} ${e===t.name?"ring-2 ring-offset-2 dark:ring-offset-gray-800":""}`,"aria-label":`Set theme color to ${t.name}${o?" (Premium)":""}`,children:o&&s.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center rounded-full bg-gradient-to-r from-blue-500 to-purple-600 px-1 py-0.5 text-xs font-semibold text-white shadow-lg",children:"✨"})},t.name)})})})]})}},9084:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(3227);let s=r(6651).default,o=r(6420).default,n=()=>(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(s,{}),a.jsx(o,{})]})},6651:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(3227),s=r(3677),o=r(8910),n=r(4672),l=r(2277);let i=()=>{let[e,t]=(0,s.useState)(!1),{theme:r,setTheme:i,resolvedTheme:c}=(0,o.F)();return((0,s.useEffect)(()=>t(!0),[]),(0,s.useEffect)(()=>{(0,n.WI)()&&l.A_.setStyle({style:"dark"===r||"dark"===c?l.bg.Dark:l.bg.Light})},[r,c]),e)?a.jsx("button",{"aria-label":"Toggle Dark Mode",onClick:()=>{i("dark"===r||"dark"===c?"light":"dark")},className:"text-theme-primary dark:text-theme-primary-light mx-1 h-8 w-8 cursor-pointer rounded-full bg-gray-100 p-1.5 transition-colors active:opacity-70 dark:bg-gray-800",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-full w-full",children:e&&("dark"===r||"dark"===c)?a.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"}):a.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}):null}},4672:(e,t,r)=>{"use strict";r.d(t,{Dt:()=>i,F1:()=>d,PH:()=>c,WI:()=>n,gn:()=>l});var a,s=r(9771),o=r(8689);(a||(a={})).STATE="STATE";let n=()=>["android","ios"].includes(s.dV.getPlatform()),l=()=>"ios"===s.dV.getPlatform(),i=()=>"android"===s.dV.getPlatform(),c=async e=>{let t=JSON.stringify(e);await o.k.set({key:"STATE",value:t})},d=async()=>(await o.k.get({key:"STATE"})).value},2845:(e,t,r)=>{"use strict";r.d(t,{ch:()=>s,d:()=>a,d8:()=>o});let a=()=>!1,s=async e=>await window.electronAPI.openBrowser(e),o=async e=>{let t=await window.electronAPI.encrypt(JSON.stringify(e));await window.electronAPI.saveState(t)}},8516:(e,t,r)=>{"use strict";r.d(t,{useDocumentVisibility:()=>s});var a=r(3677);function s(){let[e,t]=(0,a.useState)(!1);return e}},4843:(e,t,r)=>{"use strict";r.d(t,{i:()=>g});var a=r(4672),s=r(2845),o=r(1808),n=r(3677);let l=e=>JSON.parse(decodeURIComponent(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))),i=(0,s.d)()||(0,a.WI)()?"bubbly-sudoku-native":"bubbly-sudoku",c=["https://api.bubblyclouds.com"],d=["https://auth.bubblyclouds.com"],u=[RegExp("^/invites/[^/]+$")],m=["/oidc/token"],h=e=>c.includes(e.origin),p=(e,t)=>"GET"===e&&u.some(e=>e.test(t.pathname)),x=e=>d.includes(e.origin)&&m.includes(e.pathname),b=!1;function g(){let[e,t]=(0,n.useContext)(o.U),r=(0,n.useCallback)(async(e,r=!1)=>{if(console.info("useFetch saveState"),t(e),!r){if((0,s.d)()){console.info("useFetch electron saveState");try{await (0,s.d8)(e)}catch(e){console.warn(e)}}else if((0,a.WI)()){console.info("useFetch capacitor saveState");try{await (0,a.PH)(e)}catch(e){console.warn(e)}}}},[t]),c=(0,n.useCallback)(async()=>{console.info("useFetch resetState"),await r({accessToken:null,accessExpiry:null,refreshToken:null,refreshExpiry:null,user:null,userExpiry:null})},[r]),d=(0,n.useCallback)(async e=>{console.info("useFetch handleTokenSuccess");let{expires_in:t,id_token:a,access_token:s,refresh_token:o}=await e.json(),n=new Date;n.setTime(n.getTime()+1e3*t);let i=new Date;i.setTime(i.getTime()+12096e5);let c=l(a),d=new Date(i),u={accessExpiry:n,accessToken:s,refreshExpiry:i,refreshToken:o,user:c,userExpiry:d};return await r(u),u},[r]),u=(0,n.useCallback)(async()=>{if(b)return console.warn("skipping checkRefresh as already checking"),{inProgress:!0};b=!0;try{if(e.current.refreshToken&&e.current.accessExpiry&&new Date(e.current.accessExpiry).getTime()<=new Date().getTime()+9e5){console.info("useFetch refreshing token..");let t=new URLSearchParams;t.set("grant_type","refresh_token"),t.set("client_id",i),t.set("refresh_token",e.current.refreshToken);let r=await fetch("https://auth.bubblyclouds.com/oidc/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()});r.ok?await d(r):console.error("useFetch failed to refresh token",r.status)}else console.info("useFetch no need to refresh token")}catch(e){console.error(e)}b=!1},[d,e]),m=(0,n.useCallback)(()=>e.current.user&&e.current.userExpiry&&e.current.refreshToken&&e.current.refreshExpiry&&new Date(e.current.userExpiry).getTime()>new Date().getTime()&&new Date(e.current.refreshExpiry).getTime()>new Date().getTime(),[e]),g=(0,n.useCallback)(()=>{if(console.info("useFetch getUser event received"),m())return e.current.user},[m,e]);return{getUser:g,logout:(0,n.useCallback)(async()=>{console.info("useFetch logout"),await c()},[c]),restoreState:(0,n.useCallback)(async e=>{console.info("useFetch restoreState");let t=JSON.parse(e);return await r(t,!0),t.user},[r]),fetch:(0,n.useCallback)(async t=>{console.info("useFetch handleFetch");let r=new URL(t.url),a=new Headers(t.headers);if(h(r)){if(console.info("useFetch handleFetch apiUrl",t.url),e.current.accessToken){let{inProgress:t}=await u()||{};if(t)return console.warn("Skipping API call as refresh in progress"),new Response(null,{status:401});a.append("Authorization",`Bearer ${e.current.accessToken}`)}else if(!p(t.method,r))return console.warn("Resetting state as no access token, and skipping API call"),await c(),new Response(null,{status:401});let s=new Request(t,{headers:a}),o=await fetch(s);return 401===o.status&&(console.warn("Resetting state as received 401"),await c()),o}if(x(r)){console.info("useFetch handleFetch tokenUrl");let e=new Request(t,{headers:a}),r=await fetch(e);return r.ok?new Response(JSON.stringify({user:(await d(r)).user}),{headers:r.headers,status:r.status,statusText:r.statusText}):r}return fetch(t)},[u,d,c,e])}}},7071:(e,t,r)=>{"use strict";r.d(t,{useLocalStorage:()=>o});var a=r(3677),s=r(4040);function o({type:e,id:t,prefix:r="sudoku-"}){let o=(0,a.useCallback)(a=>{let o=a||t;if(!o)throw Error("id required");let n=`${r}${o}`;return e!==s.StateType.PUZZLE&&(n=`${n}-${e}`),n},[t,e,r]),n=(0,a.useCallback)(()=>{let t=new Date().getTime()-27648e5;return Object.entries(localStorage).filter(([t])=>e!==s.StateType.PUZZLE?t.startsWith(r)&&t.endsWith(`-${e}`):t.startsWith(r)&&!t.match(/-[A-Z]+$/)).map(([r,a])=>{try{let o=JSON.parse(a),n=r;if(e!==s.StateType.PUZZLE&&(n=r.replace(RegExp(`-${e}$`),"")),o.lastUpdated&&o.lastUpdated<=t){localStorage.removeItem(r);return}return{...o,sessionId:n}}catch(e){console.error(e)}}).filter(e=>!!e)},[e,r]),l=(0,a.useCallback)(({overrideId:e}={})=>{let t=localStorage.getItem(o(e));if(t)try{return JSON.parse(t)}catch(e){console.error(e)}},[o]),i=(0,a.useCallback)((e,{overrideId:t}={})=>{let a={lastUpdated:new Date().getTime(),state:e};try{localStorage.setItem(o(t),JSON.stringify(a))}catch(e){if(e instanceof DOMException&&"QuotaExceededError"===e.name){console.error("localStorage quota exceeded, attempting to clear old data");try{let e=!1,s=new Date().getTime()-2592e5;if(Object.keys(localStorage).forEach(t=>{if(t.startsWith(r))try{let r=localStorage.getItem(t);if(r){let a=JSON.parse(r);a.lastUpdated&&a.lastUpdated<s&&(console.log("Removing old item:",t),localStorage.removeItem(t),e=!0)}}catch{console.log("Removing corrupted item:",t),localStorage.removeItem(t)}}),!e){let e=[];if(Object.keys(localStorage).forEach(t=>{if(t.startsWith(r))try{let r=localStorage.getItem(t);if(r){let a=JSON.parse(r);a.lastUpdated&&e.push({key:t,lastUpdated:a.lastUpdated})}}catch{}}),e.length>0){e.sort((e,t)=>e.lastUpdated-t.lastUpdated);let t=Math.ceil(e.length/2);for(let r=0;r<t;r++)console.log("Removing item to free space:",e[r].key),localStorage.removeItem(e[r].key)}}localStorage.setItem(o(t),JSON.stringify(a))}catch(e){console.error("Failed to save to localStorage even after cleanup:",e)}}else console.error("Error saving to localStorage:",e)}return a},[o,r]);return{prefix:r,listValues:n,getValue:l,saveValue:i}}},112:(e,t,r)=>{"use strict";r.d(t,{useOnline:()=>o});var a=r(3677),s=r(9831);function o(){let[e,t]=(0,a.useContext)(s.GlobalStateContext),[r,o]=(0,a.useState)(!1);return{forceOffline:(0,a.useCallback)(e=>{t(t=>({...t,isForceOffline:e}))},[t]),isOnline:r&&!e.isForceOffline}}},5711:(e,t,r)=>{"use strict";r.d(t,{useServerStorage:()=>h});var a=r(3677),s=r(4843),o=r(1743),n=r(4040),l=r(112);let i="sudoku",c="https://api.bubblyclouds.com",d=e=>({parties:e.parties?Object.entries(e.parties).reduce((t,[r,a])=>({...t,[r]:{memberSessions:Object.entries(a.memberSessions).reduce((t,[r,a])=>{let s={sessionId:e.sessionId,state:a.state,updatedAt:new Date(a.updatedAt)};return{...t,[r]:s}},{})}}),{}):void 0,sessionId:e.sessionId,state:e.state,updatedAt:new Date(e.updatedAt)}),u=(e,t,r)=>({...e,members:t,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),isOwner:e.createdBy===r?.sub}),m=(e,t,r)=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),isOwner:e.userId===r,isUser:e.userId===t?.sub});function h({type:e,id:t}={}){let r=(0,a.useRef)({id:t,type:e}),{user:h,logout:p}=(0,a.useContext)(o.S)||{},{fetch:x,getUser:b}=(0,s.i)(),{isOnline:g}=(0,l.useOnline)(),f=(0,a.useCallback)(()=>{let{id:e,type:t}=r.current;if(!(e&&t))throw Error("Unknown id and type");let a=`${i}-${e}`;return t!==n.StateType.PUZZLE&&(a=`${a}-${t}`),a},[]),y=(0,a.useCallback)(async()=>{if(h){if(b())return!0;if(console.warn("no longer logged in, retrying"),await new Promise(e=>{setTimeout(()=>{e(b())},5e3)}))return console.warn("we are logged back in!"),!0;console.warn("no longer logged in, logging out"),p&&p()}return console.warn("not logged in"),!1},[b,p,h]),w=(0,a.useCallback)(async({partyId:e,userId:t}={})=>{if(g&&await y())try{console.info("fetching sessions",{partyId:e,userId:t});let r=await x(new Request(`${c}/sessions?app=${i}${e?`&partyId=${encodeURIComponent(e)}`:""}${t?`&userId=${encodeURIComponent(t)}`:""}`));if(r.ok)return(await r.json()).map(e=>d(e))}catch(e){console.error(e)}},[x,y,g]),v=(0,a.useCallback)(async()=>{if(g&&await y())try{let e=f();console.info("fetching session",e);let t=await x(new Request(`${c}/sessions/${e}`));if(t.ok)return d(await t.json())}catch(e){console.error(e)}},[f,x,y,g]),k=(0,a.useCallback)(async e=>{if(g&&await y())try{let t=f();console.info("saving session",t);let r=new Date;r.setDate(r.getDate()+32);let a=await x(new Request(`${c}/sessions/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({state:e,expiresAt:r.toISOString()})}));if(a.ok)return d(await a.json())}catch(e){console.error(e)}},[f,x,y,g]),j=(0,a.useCallback)(async()=>{if(g&&await y())try{console.info("fetching parties");let e=await x(new Request(`${c}/parties?app=${i}`));if(e.ok){let t=[];for(let r of(await e.json())){let e=await x(new Request(`${c}/members?resourceId=party-${r.partyId}`)),a=e.ok&&await e.json(),s=a?a.map(e=>m(e,h,r.createdBy)):[];t.push(u(r,s,h))}return t}}catch(e){console.error(e)}},[x,y,g,h]),S=(0,a.useCallback)(async({partyName:e,memberNickname:t})=>{if(g&&await y())try{let r=await x(new Request(`${c}/parties`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partyName:e,memberNickname:t,appId:i})}));if(r.ok){let e=await r.json();return u(e,[m({memberNickname:t,createdAt:e.createdAt,resourceId:`party-${e.partyId}`,updatedAt:e.updatedAt,userId:h?.sub||""},h,h?.sub)],h)}}catch(e){console.error(e)}},[x,y,g,h]),C=(0,a.useCallback)(async({resourceId:e,description:t,sessionId:r,redirectUri:a,expiresAt:s})=>{if(g&&await y())try{let o=await x(new Request(`${c}/invites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resourceId:e,description:t,sessionId:r,redirectUri:a,expiresAt:s})}));if(o.ok){let e=await o.json();return{...e,expiresAt:new Date(e.expiresAt),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}}}catch(e){console.error(e)}},[x,y,g]),N=(0,a.useCallback)(async e=>{if(g)try{let t=await x(new Request(`${c}/invites/${e}`));if(t.ok)return await t.json()}catch(e){console.error(e)}},[x,g]),P=(0,a.useCallback)(async({inviteId:e,memberNickname:t})=>{if(g&&await y())try{let r=await x(new Request(`${c}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inviteId:e,memberNickname:t})}));if(r.ok){let e=await r.json();return{...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),isOwner:!1,isUser:!0}}}catch(e){console.error(e)}},[x,y,g]),I=(0,a.useCallback)(async e=>{if(g&&await y())try{console.info("fetching sudoku of the day",e);let t=await x(new Request(`${c}/sudoku/ofTheDay?difficulty=${e}`));if(t.ok){let e=await t.json();return{...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}}}catch(e){console.error(e)}},[x,y,g]),T=(0,a.useCallback)(async()=>{if(g&&await y())try{console.info("fetching sudoku book of the month");let e=await x(new Request(`${c}/sudoku/bookOfTheMonth`));if(e.ok){let t=await e.json();return{...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)}}}catch(e){console.error(e)}},[x,y,g]),E=(0,a.useCallback)(async(e,t)=>{if(g&&await y())try{return console.info("removing member from party",{partyId:e,userId:t}),(await x(new Request(`${c}/members/${encodeURIComponent(t)}?resourceId=party-${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}))).ok}catch(e){console.error(e)}return!1},[x,y,g]),A=(0,a.useCallback)(async e=>!!h&&E(e,h.sub),[E,h]),F=(0,a.useCallback)(async e=>{if(g&&await y())try{return console.info("deleting party",e),(await x(new Request(`${c}/parties/${e}?app=${i}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}))).ok}catch(e){console.error(e)}return!1},[x,y,g]);return{setIdAndType:({type:e,id:t}={})=>{r.current.id=t,r.current.type=e},listValues:w,getValue:v,saveValue:k,listParties:j,createParty:S,updateParty:(0,a.useCallback)(async(e,t)=>{if(g&&await y())try{return console.info("updating party",{partyId:e,updates:t}),(await x(new Request(`${c}/parties/${e}?app=${i}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}))).ok}catch(e){console.error(e)}return!1},[x,y,g]),createInvite:C,getPublicInvite:N,createMember:P,getSudokuOfTheDay:I,getSudokuBookOfTheMonth:T,leaveParty:A,removeMember:E,deleteParty:F,deleteAccount:(0,a.useCallback)(async()=>{if(g&&await y()&&h)try{return console.info("deleting account",h.sub),(await x(new Request(`${c}/account`,{method:"DELETE",headers:{"Content-Type":"application/json"}}))).ok}catch(e){console.error(e)}return!1},[x,y,g,h])}}},615:(e,t,r)=>{"use strict";r.d(t,{useWakeLock:()=>s});var a=r(3677);function s(){let e=(0,a.useRef)(null),[,t]=(0,a.useState)(0);return{requestWakeLock:async()=>{try{if("wakeLock"in navigator){let r=await navigator.wakeLock.request("screen");return e.current=r,t(e=>e+1),console.info("Screen wake lock activated"),r.addEventListener("release",()=>{console.info("Screen wake lock released"),e.current=null,t(e=>e+1)}),r}console.warn("Wake Lock API not supported in this browser")}catch(e){console.error("Failed to activate screen wake lock:",e)}return null},releaseWakeLock:async()=>{if(e.current&&!e.current.released)try{await e.current.release(),e.current=null,t(e=>e+1),console.info("Screen wake lock manually released")}catch(e){console.error("Failed to release screen wake lock:",e)}},isActive:!!e.current&&!e.current.released}}},970:(e,t,r)=>{"use strict";r.d(t,{Wn:()=>p.default,qc:()=>R,c6:()=>g.Z,$_:()=>c,MC:()=>y.default,_k:()=>_,$i:()=>i.PremiumFeatures,lK:()=>x.l,NG:()=>x.Z,te:()=>a.default,Yk:()=>v.StateType,eb:()=>f.ThemeColorProvider,St:()=>b.S,dr:()=>b.Z,Ao:()=>F,Dv:()=>$,RP:()=>I,eC:()=>P,Jq:()=>N,ZC:()=>A,Cx:()=>C,oF:()=>S,WI:()=>n.WI,d:()=>T.d,gw:()=>D,xK:()=>m.useDocumentVisibility,_:()=>u.useLocalStorage,sd:()=>d.useOnline,QP:()=>h.useServerStorage,dL:()=>w.useSessions}),r(1032),r(6632),r(9084),r(3476);var a=r(1124),s=r(3227),o=r(2278);(0,o.default)(async()=>{},{loadableGenerated:{modules:["../../template/src/components/Header/Header.tsx -> ../HeaderUser"]},ssr:!1}),(0,o.default)(async()=>{},{loadableGenerated:{modules:["../../template/src/components/Header/Header.tsx -> ../HeaderBack"]},ssr:!1}),(0,o.default)(async()=>{},{loadableGenerated:{modules:["../../template/src/components/Header/Header.tsx -> ../HeaderOnline"]},ssr:!1});var n=r(4672);r(1501);var l=r(3677);r(2630),r(9085),r(6506),r(6651),r(6420);var i=r(3649);let c=({children:e})=>s.jsx("nav",{className:`${(0,n.WI)()?"pb-safe pt-2":""} fixed bottom-0 left-0 z-50 m-auto mt-3 h-20 w-screen items-center justify-between border-t border-stone-200 bg-stone-50/90 px-6 text-sm text-black backdrop-blur-md dark:border-gray-700 dark:bg-zinc-900/90 dark:text-white`,children:s.jsx("div",{className:`mx-auto grid h-full max-w-lg grid-cols-${l.Children.count(e)} font-medium`,children:e})});r(1403);var d=r(112),u=r(7071);r(615),r(4843);var m=r(8516),h=r(5711),p=r(6372),x=r(3408),b=r(1743),g=r(1808),f=r(7572),y=r(9831),w=r(6234),v=r(4040);let k={UNDO:3,CHECK_GRID:3};function j(){return{date:new Date().toISOString().split("T")[0],undoCount:0,checkGridCount:0}}function S(){let e=j();return e.undoCount+=1,e.undoCount}function C(){let e=j();return e.checkGridCount+=1,e.checkGridCount}function N(){return j().undoCount<k.UNDO}function P(){return j().checkGridCount<k.CHECK_GRID}let I=e=>{let t=0;return e&&(t=e.seconds+Math.floor((new Date(e.inProgress.lastInteraction).getTime()-new Date(e.inProgress.start).getTime())/1e3)),t};var T=r(2845);let E=e=>`${e}`.padStart(2,"0"),A=e=>`${E(Math.floor(e/3600))}:${E(Math.floor(e%3600/60))}:${E(Math.floor(e%60))}`,F=(e,t)=>`box:${e},${t}`,$=(e,t,r)=>`${e},cell:${t},${r}`,D=e=>{let t=Array.from(e.matchAll(RegExp("box:([0-3]),([0-3]),cell:([0-3]),([0-3])","g")),e=>[Number(e[1]),Number(e[2]),Number(e[3]),Number(e[4])])[0];return t?{box:{x:t[0],y:t[1]},cell:{x:t[2],y:t[3]}}:(console.error(`Invalid cellId format: ${e}`),{box:{x:0,y:0},cell:{x:0,y:0}})},R={UNDO:5,CHECK_GRID:5,PUZZLE:1};var L=r(3557),U=r(5930),O=r(5366),z=r(1395),M=r(8344);let _=[{icon:s.jsx(L.Z,{className:"h-6 w-6"}),title:"\uD83C\uDFC1 Unlimited play and race",description:"Race friends in real-time more than once a day"},{icon:s.jsx(U.Z,{className:"h-6 w-6"}),title:"Create and join multiple racing teams",description:"Host private competitions with friends and family"},{icon:s.jsx(O.Z,{className:"h-6 w-6"}),title:"Racing team management",description:"Create large parties up to 15 people, and remove members from your team."},{icon:s.jsx(z.Z,{className:"h-6 w-6"}),title:"All themes unlocked",description:"Personalise your racing experience"},{icon:s.jsx(M.Z,{className:"h-6 w-6"}),title:"Unlimited undo, check and reveal",description:"Remove daily undo, check and reveal limits"}]},6372:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CapacitorContext:()=>c,default:()=>d});var a=r(3227),s=r(3677),o=r.n(s),n=r(5300),l=r(1043),i=r(8171);let c=o().createContext(void 0),d=({children:e})=>{let t=(0,l.useRouter)(),r=(0,l.usePathname)();return(0,s.useEffect)(()=>{let e=!0;return n.g.removeAllListeners().then(()=>{n.g.addListener("appUrlOpen",r=>{if(console.info("appUrlOpen",r.url),e){if(console.info("appUrlOpen is active"),r.url){let e=new URL(r.url);e.protocol=window.location.protocol,e.host=window.location.host,e.port=window.location.port;let a=`${e.pathname}${e.search}`;console.info("router.push",a),t.push(a),i.A.close().catch(e=>{console.warn(e)})}}else console.info("appUrlOpen not active")}),n.g.addListener("backButton",()=>{e&&("/"===r?n.g.minimizeApp():t.back())})}),()=>{e=!1}},[t,r]),a.jsx(c.Provider,{value:{},children:e})}},9673:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FetchContext:()=>o,default:()=>n});var a=r(3227),s=r(3677);let o=r.n(s)().createContext(void 0),n=({children:e})=>{let t=(0,s.useRef)({accessToken:null,accessExpiry:null,refreshToken:null,refreshExpiry:null,user:null,userExpiry:null}),r=[t,e=>{t.current=e}];return a.jsx(o.Provider,{value:r,children:e})}},1808:(e,t,r)=>{"use strict";r.d(t,{U:()=>a.FetchContext,Z:()=>a.default});var a=r(9673)},9831:(e,t,r)=>{"use strict";r.d(t,{GlobalStateContext:()=>o,default:()=>n});var a=r(3227),s=r(3677);let o=r.n(s)().createContext(void 0),n=({children:e})=>{let t=(0,s.useState)({isForceOffline:!1});return a.jsx(o.Provider,{value:t,children:e})}},9401:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RevenueCatContext:()=>u,default:()=>m});var a=r(3227),s=r(3677),o=r.n(s),n=r(4672),l=r(2845),i=r(6248),c=r(728),d=r(1743);let u=o().createContext(void 0),m=({children:e})=>{let{user:t,loginRedirect:r}=(0,s.useContext)(d.S)||{},[o,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)([]),[x,b]=(0,s.useState)(null);console.info(x);let[g,f]=(0,s.useState)(!1),[y,w]=(0,s.useState)(()=>()=>{}),[v,k]=(0,s.useState)(()=>()=>{}),[j,S]=(0,s.useState)(void 0),C=async()=>{if(t)try{if((0,n.WI)()){let{customerInfo:e}=await i.vL.getCustomerInfo();b(e)}else if(!(0,l.d)()){let e=await c.vL.getSharedInstance().getCustomerInfo();b(e)}}catch(e){console.error("Error refreshing customer info:",e)}},N=async()=>{await C()};(0,s.useEffect)(()=>{if(t)try{m(!0),(0,n.WI)()?async function(){await i.vL.setLogLevel({level:i.pO.DEBUG}),(0,n.gn)()?await i.vL.configure({appUserID:t.sub,apiKey:"appl_cSnwNkaTjlVONbHuKzVNTRjQsbT"}):(0,n.Dt)()&&await i.vL.configure({appUserID:t.sub,apiKey:"goog_NrLMlLbrRvQVKxXifUHmJBkSOXr"});let e=await i.vL.getOfferings();p(e.all.default.availablePackages);let{customerInfo:r}=await i.vL.getCustomerInfo();b(r)}():(0,l.d)()||async function(){c.vL.setLogLevel(c.in.Debug),c.vL.configure({appUserId:t.sub,apiKey:"rcb_ZoFwJlmCeBHaoVZNPhCiUqLXRAhf"});let e=await c.vL.getSharedInstance().getOfferings();p(e.all.default.availablePackages);let r=await c.vL.getSharedInstance().getCustomerInfo();b(r)}()}catch(e){console.error("Error fetching customer info:",e)}finally{m(!1)}},[t]);let P=async e=>{let t=document.querySelector("html")?.getAttribute("style"),r=document.querySelector("html")?.getAttribute("class"),a=document.querySelector("body")?.getAttribute("style"),s=document.querySelector("body")?.getAttribute("class");try{if((0,n.WI)()){let{customerInfo:t}=await i.vL.purchasePackage({aPackage:e});return b(t),!!t?.entitlements.active.Plus}if((0,l.d)());else{let{customerInfo:t}=await c.vL.getSharedInstance().purchase({rcPackage:e});return b(t),!!t?.entitlements.active.Plus}}catch(e){console.warn(e)}finally{t&&document.querySelector("html")?.setAttribute("style",t),r&&document.querySelector("html")?.setAttribute("class",r),a&&document.querySelector("body")?.setAttribute("style",a),s&&document.querySelector("body")?.setAttribute("class",s)}},I=async()=>{try{if((0,n.WI)()){let{customerInfo:e}=await i.vL.restorePurchases();return b(e),!!e?.entitlements.active.Plus}}catch(e){console.warn(e)}},T=!!x?.entitlements.active.Plus;return a.jsx(u.Provider,{value:{isLoading:o,isSubscribed:T,packages:h,purchasePackage:P,restorePurchases:I,refreshEntitlements:N,subscribeModal:{isOpen:g,callback:y,cancelCallback:v,context:j,showModalIfRequired:(e,a=()=>{},s)=>t?T?e():void(w(()=>e),k(()=>a),S(s),f(!0)):confirm("You need to sign in to continue. Would you like to sign in now?")&&r?r({userInitiated:!0}):a(),hideModal:()=>f(!1)}},children:e})}},3408:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a.default,l:()=>a.RevenueCatContext});var a=r(9401)},6234:(e,t,r)=>{"use strict";r.d(t,{SessionsProvider:()=>d,useSessions:()=>u});var a=r(3227),s=r(3677),o=r(4040),n=r(5711),l=r(7071),i=r(1743);let c=(0,s.createContext)(null),d=({children:e})=>{let{user:t}=(0,s.useContext)(i.S)||{},[r,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)({}),[x,b]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),y=(0,s.useRef)({}),w=(0,s.useRef)(!1),v=(0,s.useRef)(null),{listValues:k}=(0,n.useServerStorage)();y.current=h,v.current=r,(0,s.useEffect)(()=>{p({}),f(!1)},[t]);let{prefix:j,listValues:S,saveValue:C}=(0,l.useLocalStorage)({type:o.StateType.PUZZLE}),{listValues:N,saveValue:P}=(0,l.useLocalStorage)({type:o.StateType.TIMER}),I=(0,s.useCallback)(e=>{d(t=>{if(null!==t){e.filter(e=>!t?.find(t=>e.sessionId===t.sessionId)).map(e=>{let{sessionId:t,state:r}=e;if(t.startsWith(j)&&r){let e=t.replace(j,""),{timer:a,...s}=r,o={...s,answerStack:s.completed&&s.answerStack?s.answerStack.slice(-2):s.answerStack};console.info("Saving missing local puzzle",e),C(o,{overrideId:e}),a&&(console.info("Saving missing local timer",e),P(a,{overrideId:e}))}});let r=[...e,...t].sort(({updatedAt:e},{updatedAt:t})=>t.getTime()-e.getTime());return r.filter(({sessionId:e},t)=>t<=r.findIndex(t=>t.sessionId===e))}return e})},[j,C,P]),T=(0,s.useCallback)(async(e=!1)=>{let t=v.current;if((e||!t||!(t.length>0))&&!w.current){w.current=!0,m(!0);try{let e=S(),t=N(),r=e.map(e=>{let r=new Date(e.lastUpdated);return{...e,updatedAt:r,state:{...e.state,timer:t.find(t=>t.sessionId===e.sessionId)?.state}}}).sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime());d(r);try{let e=await k();if(e&&e.length>0){let t=new Date().getTime()-27648e5,r=e.filter(e=>e.updatedAt.getTime()>=t);I(r)}}catch(e){}}catch(e){console.error("Error loading sessions:",e)}finally{w.current=!1,m(!1)}}},[S,N,k,I]),E=(0,s.useCallback)(async()=>{r||u||await T(!1)},[r,u,T]),A=(0,s.useCallback)(async()=>{await T(!0)},[T]),F=(0,s.useCallback)(e=>{d(e)},[]),$=(0,s.useCallback)(()=>{d(null)},[]),D=(0,s.useCallback)(async e=>{if(!x){g||f(!0),b(!0);try{let t=Array.from(new Set(e.flatMap(({members:e})=>e).map(({userId:e})=>e))),r={};t.forEach(e=>{y.current[e]&&(y.current[e]?.isLoading||y.current[e]?.sessions)||(r[e]={isLoading:!0})}),p(e=>({...e,...r}));let a=t.filter(e=>r[e]).map(async t=>{try{let r=e.find(e=>e.members.some(e=>e.userId===t));if(!r)return{userId:t,sessions:null};let a=await k({partyId:r.partyId,userId:t});if(!a)return{userId:t,sessions:null};{let e=new Date().getTime()-27648e5,r=a.filter(t=>t.updatedAt.getTime()>=e);return{userId:t,sessions:r}}}catch(e){return console.error(`Error fetching sessions for user ${t}:`,e),{userId:t,sessions:null}}}),s=await Promise.all(a);p(e=>{let t={...e};return s.forEach(({userId:e,sessions:r})=>{t[e]={isLoading:!1,sessions:r||void 0}}),t})}catch(e){console.error("Error fetching friend sessions:",e)}finally{b(!1)}}},[k,x,g]),R=(0,s.useCallback)(()=>{p({})},[]),L=(0,s.useCallback)(async e=>{g||x||!(e.length>0)||(console.info("lazyLoadFriendSessions"),await D(e))},[g,x,D]),U=(0,s.useCallback)((e,t)=>e.reduce((e,r)=>({...e,[r.partyId]:{memberSessions:Object.entries(h).reduce((e,[r,a])=>{let s=a?.sessions?.find(e=>e.sessionId===t);return s?{...e,[r]:s}:e},{})}}),{}),[h]),O=(0,s.useCallback)((e,t)=>{console.info("patchFriendSessions",t),x||p(r=>({...r,...Object.entries(t).reduce((t,[a,s])=>{if(r[a]?.sessions&&!r[a].isLoading){let o={...r[a],isLoading:r[a].isLoading,sessions:[...r[a].sessions.filter(t=>t.sessionId!==e),s]};return{...t,[a]:o}}return t},{})}))},[x]);return a.jsx(c.Provider,{value:{sessions:r,isLoading:u,fetchSessions:E,refetchSessions:A,setSessions:F,clearSessions:$,friendSessions:h,isFriendSessionsLoading:x,fetchFriendSessions:D,lazyLoadFriendSessions:L,clearFriendSessions:R,getSessionParties:U,patchFriendSessions:O},children:e})},u=()=>{let e=(0,s.useContext)(c);if(!e)throw Error("useSessions must be used within a SessionsProvider");return e}},7572:(e,t,r)=>{"use strict";r.d(t,{ThemeColorProvider:()=>l,useThemeColor:()=>i});var a=r(3227),s=r(3677),o=r(8910);let n=(0,s.createContext)(void 0);function l({children:e}){let{theme:t}=(0,o.F)(),[r,l]=(0,s.useState)("blue"),[i,c]=(0,s.useState)(!1);return a.jsx(n.Provider,{value:{themeColor:r,setThemeColor:e=>{l(e),localStorage.setItem("theme-color",e);let t=document.documentElement;t.classList.remove("theme-blue","theme-red","theme-green","theme-purple","theme-amber","theme-cyan","theme-pink","theme-indigo","theme-orange","theme-teal","theme-slate","theme-rose","theme-emerald","theme-sky","theme-violet","theme-lime","theme-fuchsia","theme-yellow","theme-stone","theme-zinc"),t.classList.add(`theme-${e}`)}},children:e})}function i(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useThemeColor must be used within a ThemeColorProvider");return e}},9681:(e,t,r)=>{"use strict";r.r(t),r.d(t,{UserContext:()=>h,default:()=>g});var a=r(3227),s=r(4672),o=r(2845);function n(e){return("0"+e.toString(16)).substring(-2)}let l=async()=>{let e=function(){var e=new Uint32Array(12);return window.crypto.getRandomValues(e),Array.from(e,n).join("")}(),t=function(e){for(var t="",r=new Uint8Array(e),a=r.byteLength,s=0;s<a;s++)t+=String.fromCharCode(r[s]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(await function(e){let t=new TextEncoder().encode(e);return window.crypto.subtle.digest("SHA-256",t)}(e));return{codeVerifier:e,codeChallenge:t,codeChallengeMethod:"S256"}};var i=r(1043),c=r(4843),d=r(3677),u=r.n(d),m=r(8171);let h=u().createContext(void 0),p=()=>(0,o.d)()?"com.bubblyclouds.sudoku://-/auth.html":(0,s.WI)()?"com.bubblyclouds.sudoku://-/auth":`${window.location.origin}/auth`,x=!1,b=!1,g=({children:e})=>{let[t,r]=u().useState(void 0),{fetch:n,getUser:g,logout:f,restoreState:y}=(0,c.i)(),[w,v]=u().useState(!1),[k,j]=u().useState(!1),S=(0,i.useRouter)(),C="https://auth.bubblyclouds.com",N=(0,o.d)()||(0,s.WI)()?"bubbly-sudoku-native":"bubbly-sudoku",P=u().useCallback(async(e,r,a=0)=>{if(t){console.info("restoreCapacitorState already got user skipping");return}try{console.info(`restoreCapacitorState getCapacitorState attempt ${a}`);let t=await (0,s.F1)();if(t){console.info("restoreCapacitorState getCapacitorState restoring..");let a=await r(t);if(a){console.info("restoreCapacitorState calling handleUser with newUser"),await e(a,!0);return}console.info("restoreCapacitorState getCapacitorState no user")}else console.info("restoreCapacitorState getCapacitorState none");a<5&&(console.info("restoreCapacitorState try again shortly for firefox mobile.."),new Promise(t=>{setTimeout(async()=>{await P(e,r,a+1),t(void 0)},1e3)}))}catch(e){console.warn(e)}},[t]),I=u().useCallback(async({userInitiated:e})=>{console.info("loginRedirect.."),v(!0),localStorage.setItem("restorePathname",`${window.location.pathname}${window.location.search}`);let t=window.crypto.randomUUID();localStorage.setItem("state",t);let{codeChallenge:r,codeVerifier:a,codeChallengeMethod:n}=await l();localStorage.setItem("code_verifier",a);let i=p(),c=new URLSearchParams;c.set("state",t),c.set("redirect_uri",i),c.set("client_id",N),c.set("response_type","code"),c.set("scope","openid profile offline_access parties.write members.write invites.write sessions.write"),c.set("code_challenge",r),c.set("code_challenge_method",n),c.set("resource","https://api.bubblyclouds.com"),e&&c.set("prompt","consent");let d=`${C}/oidc/auth?${c.toString()}`;(0,o.d)()?await (0,o.ch)(d):(0,s.WI)()?await m.A.open({url:d,windowName:"_self"}):window.location.href=d,setTimeout(()=>{v(!1)},1e4)},[N]),T=u().useCallback(async(e,t=!1)=>{console.info("user received",e),e?(console.info("handleUser",e),r(t=>(t&&console.warn("handleUser ignoring new user, already got user"),t||e)),(0,o.d)()||(0,s.WI)()||localStorage.setItem("recoverSession","true")):!t&&((0,s.WI)()&&await P(T,y),"true"===localStorage.getItem("recoverSession")&&window.navigator.onLine&&(localStorage.setItem("recoverSession","false"),console.warn("no user, redirecting to login"),await I({userInitiated:!1})))},[I,y,P]),E=u().useCallback(async e=>{console.info("handleAuthUrl"),v(!0);let t=async()=>{try{if(!x&&e.active){x=!0;let t=new URLSearchParams(window.location.search),r=t.get("code")||"",a=t.get("state")||"",s=p(),o=localStorage.getItem("code_verifier");if(a===localStorage.getItem("state")&&o){console.info("handleAuthUrl requesting code exchange");let t=new URLSearchParams;t.set("grant_type","authorization_code"),t.set("client_id",N),t.set("code_verifier",o),t.set("code",r),t.set("redirect_uri",s);let a=await n(new Request(`${C}/oidc/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()}));if(a.ok&&e.active){let{user:t}=await a.json();console.info("handleAuthUrl user received from code exchange",t),t&&e.active&&await T(t)}}else console.info(`handleAuthUrl skipping as state ${a} !== localStorage ${localStorage.getItem("state")} or codeVerifier ${o} missing`)}else console.info("handleAuthUrl skipping as isExhanging")}catch(e){console.error(e)}if(e.active){v(!1),x=!1;let e=localStorage.getItem("restorePathname");console.info("restorePathname",e),localStorage.removeItem("restorePathname"),localStorage.removeItem("state"),localStorage.removeItem("code_verifier"),S.replace(e&&"/auth"!==e?e:"/")}};await t()},[N,S,T,n]),A=u().useCallback(async()=>{console.info("restoreState");let e=new URLSearchParams(window.location.search).get("state")||"",t=await window.electronAPI.decrypt(e);await T(await y(t)),S.replace("/")},[S,y,T]);u().useEffect(()=>{if(b){console.warn("isInitialising, exiting early");return}b=!0,(async()=>{["/auth","/restoreState"].includes(window.location.pathname.replace(".html",""))||T(g()),j(!0)})()},[g,T]);let F=async()=>{console.warn("handleLogout"),localStorage.setItem("recoverSession","false"),r(void 0),await f(),S.replace("/")};return(0,d.useEffect)(()=>{let e=!0;return m.A.addListener("browserFinished",()=>{e&&(console.info("browserFinished"),P(T,y))}),()=>{e=!1,m.A.removeAllListeners()}},[T,y,P]),a.jsx(h.Provider,{value:{isInitialised:k,isLoggingIn:w,loginRedirect:I,user:t,handleAuthUrl:E,handleRestoreState:A,logout:F},children:e})}},1743:(e,t,r)=>{"use strict";r.d(t,{S:()=>a.UserContext,Z:()=>a.default});var a=r(9681)},4040:(e,t,r)=>{"use strict";var a;r.d(t,{StateType:()=>a}),function(e){e.PUZZLE="PUZZLE",e.TIMER="TIMER"}(a||(a={}))},8142:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E,metadata:()=>I,viewport:()=>T});var a,s=r(9013),o=r(5900),n=r.n(o),l=r(250),i=r.n(l),c=r(461),d=r.n(c);r(5556),r(6321);var u=r(3189);let m=(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/sudoku/src/app/providers.tsx#Providers`),h=(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/ErrorBoundary/ErrorBoundary.tsx#default`);(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/AppDownloadModal/AppDownloadModal.tsx#AppDownloadModal`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/AppDownloadModal/AppDownloadModal.tsx#default`);let p=(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/ThemeControls/ThemeControls.tsx#default`);(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/CelebrationAnimation/CelebrationAnimation.tsx#CelebrationAnimation`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/SocialProof/SocialProof.tsx#default`);var x=r(223);let b=(0,x.default)(()=>Promise.resolve().then(r.bind(r,9326)),{loadableGenerated:{modules:["../../template/src/components/Header/Header.tsx -> ../HeaderUser"]},ssr:!1}),g=(0,x.default)(()=>Promise.resolve().then(r.bind(r,2442)),{loadableGenerated:{modules:["../../template/src/components/Header/Header.tsx -> ../HeaderBack"]},ssr:!1}),f=(0,x.default)(()=>r.e(880).then(r.bind(r,8880)),{loadableGenerated:{modules:["../../template/src/components/Header/Header.tsx -> ../HeaderOnline"]},ssr:!1}),y=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("nav",{className:"fixed top-0 left-0 z-50 flex w-screen flex-wrap items-center justify-between border-b border-stone-200 bg-stone-50 px-4 pt-[var(--ion-safe-area-top)] pb-1 dark:border-zinc-600 dark:bg-zinc-900",children:[s.jsx("div",{className:"text-theme-primary dark:text-theme-primary-light mr-4 flex shrink-0 items-center",children:s.jsx(g,{})}),(0,s.jsxs)("div",{className:"block flex grow items-center",children:[s.jsx("div",{className:"grow text-center font-medium"}),(0,s.jsxs)("div",{className:"flex h-12 items-center",children:[s.jsx(b,{}),s.jsx(p,{}),s.jsx(f,{})]})]})]}),s.jsx("div",{className:"pt-[calc(var(--ion-safe-area-top)+3.25rem)]"})]});r(9226),r(2442),r(9326),r(3598),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/ThemeSwitch/ThemeSwitch.tsx#default`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/ThemeColorSwitch/ThemeColorSwitch.tsx#default`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/PremiumFeatures/PremiumFeatures.tsx#PremiumFeatures`);var w=r(6383);r(6212),(a||(a={})).STATE="STATE";let v=(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/GlobalErrorHandler/GlobalErrorHandler.tsx#default`);(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/hooks/online.ts#useOnline`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/hooks/localStorage.ts#useLocalStorage`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/hooks/useWakeLock.ts#useWakeLock`),r(9990),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/FetchProvider/FetchProvider.tsx#FetchContext`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/FetchProvider/FetchProvider.tsx#default`),["android","ios"].includes(w.dV.getPlatform()),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/hooks/documentVisibility.ts#useDocumentVisibility`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/hooks/serverStorage.ts#useServerStorage`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/CapacitorProvider/CapacitorProvider.tsx#CapacitorContext`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/CapacitorProvider/CapacitorProvider.tsx#default`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/RevenueCatProvider/RevenueCatProvider.tsx#RevenueCatContext`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/RevenueCatProvider/RevenueCatProvider.tsx#default`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/UserProvider/UserProvider.tsx#UserContext`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/UserProvider/UserProvider.tsx#default`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/ThemeColorProvider.tsx#ThemeColorProvider`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/ThemeColorProvider.tsx#useThemeColor`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/GlobalStateProvider/GlobalStateProvider.tsx#GlobalStateContext`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/GlobalStateProvider/GlobalStateProvider.tsx#default`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/SessionsProvider/SessionsProvider.tsx#SessionsProvider`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/providers/SessionsProvider/SessionsProvider.tsx#useSessions`),(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/types/StateType.ts#StateType`);var k=r(7986),j=r(1812),S=r(4150),C=r(6167),N=r(4115);k.Z,j.Z,S.Z,C.Z,N.Z;let P=(0,u.createProxy)(String.raw`/home/node/git/sudoku-web/apps/sudoku/src/components/SudokuPlusModal.tsx#default`),I={title:"Sudoku Race",description:"Play and share to race sudoku with friends. Daily challenges & cross-device!",icons:[{url:"/icons/icon-48.webp",type:"image/png",sizes:"48x48"},{url:"/icons/icon-72.webp",type:"image/png",sizes:"72x72"},{url:"/icons/icon-96.webp",type:"image/png",sizes:"96x96"},{url:"/icons/icon-128.webp",type:"image/png",sizes:"128x128"},{url:"/icons/icon-192.webp",type:"image/png",sizes:"192x192"},{url:"/icons/icon-256.webp",type:"image/png",sizes:"256x256"},{url:"/icons/icon-512.webp",type:"image/png",sizes:"512x512"}]},T={viewportFit:"cover",width:"device-width",initialScale:1,minimumScale:1,maximumScale:1,userScalable:!1};function E({children:e}){return(0,s.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[s.jsx("head",{children:s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Pacifico&family=Orbitron:wght@400;700&family=Creepster&display=swap",rel:"stylesheet"})}),(0,s.jsxs)("body",{className:`${n().className} ${i().variable} ${d().variable}`,children:[s.jsx(v,{}),s.jsx(h,{children:(0,s.jsxs)(m,{children:[s.jsx(y,{}),s.jsx("div",{className:"mb-24",children:e}),s.jsx(P,{})]})})]})]})}},8909:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(9013);function s(){return a.jsx("div",{className:"text-center",children:"Page Not Found"})}},9226:()=>{throw Error("Module build failed (from ../../node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError: \n  \x1b[31mx\x1b[0m You're importing a component that needs useEffect. It only works in a Client Component but none of its parents are marked with \"use client\", so they're Server Components by default.\n  \x1b[31m|\x1b[0m Learn more: https://nextjs.org/docs/getting-started/react-essentials\n  \x1b[31m|\x1b[0m \n  \x1b[31m|\x1b[0m \n   ,-[\x1b[36;1;4m/home/node/git/sudoku-web/apps/template/src/components/CopyButton/CopyButton.tsx\x1b[0m:1:1]\n \x1b[2m1\x1b[0m | import { isIOS } from '../../helpers/capacitor';\n \x1b[2m2\x1b[0m | import { Share } from '@capacitor/share';\n \x1b[2m3\x1b[0m | import { useEffect, useState } from 'react';\n   : \x1b[31;1m         ^^^^^^^^^\x1b[0m\n \x1b[2m4\x1b[0m | import {\n \x1b[2m5\x1b[0m |   Check,\n \x1b[2m6\x1b[0m |   Copy,\n   `----\n\n  \x1b[31mx\x1b[0m You're importing a component that needs useState. It only works in a Client Component but none of its parents are marked with \"use client\", so they're Server Components by default.\n  \x1b[31m|\x1b[0m Learn more: https://nextjs.org/docs/getting-started/react-essentials\n  \x1b[31m|\x1b[0m \n  \x1b[31m|\x1b[0m \n   ,-[\x1b[36;1;4m/home/node/git/sudoku-web/apps/template/src/components/CopyButton/CopyButton.tsx\x1b[0m:1:1]\n \x1b[2m1\x1b[0m | import { isIOS } from '../../helpers/capacitor';\n \x1b[2m2\x1b[0m | import { Share } from '@capacitor/share';\n \x1b[2m3\x1b[0m | import { useEffect, useState } from 'react';\n   : \x1b[31;1m                    ^^^^^^^^\x1b[0m\n \x1b[2m4\x1b[0m | import {\n \x1b[2m5\x1b[0m |   Check,\n \x1b[2m6\x1b[0m |   Copy,\n   `----\n")},2442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(3189).createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/HeaderBack/HeaderBack.tsx#default`)},3598:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(3189).createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/HeaderOnline/HeaderOnline.tsx#default`)},9326:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(3189).createProxy)(String.raw`/home/node/git/sudoku-web/apps/template/src/components/HeaderUser/HeaderUser.tsx#default`)},9990:()=>{throw Error("Module build failed (from ../../node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError: \n  \x1b[31mx\x1b[0m You're importing a component that needs useEffect. It only works in a Client Component but none of its parents are marked with \"use client\", so they're Server Components by default.\n  \x1b[31m|\x1b[0m Learn more: https://nextjs.org/docs/getting-started/react-essentials\n  \x1b[31m|\x1b[0m \n  \x1b[31m|\x1b[0m \n   ,-[\x1b[36;1;4m/home/node/git/sudoku-web/apps/template/src/hooks/useDrag.ts\x1b[0m:2:1]\n \x1b[2m2\x1b[0m |   PointerEvent as ReactPointerEvent,\n \x1b[2m3\x1b[0m |   RefObject,\n \x1b[2m4\x1b[0m |   useCallback,\n \x1b[2m5\x1b[0m |   useEffect,\n   : \x1b[31;1m  ^^^^^^^^^\x1b[0m\n \x1b[2m6\x1b[0m |   useState,\n \x1b[2m7\x1b[0m | } from 'react';\n \x1b[2m8\x1b[0m | import { splitCellId } from '../helpers/calculateId';\n   `----\n\n  \x1b[31mx\x1b[0m You're importing a component that needs useState. It only works in a Client Component but none of its parents are marked with \"use client\", so they're Server Components by default.\n  \x1b[31m|\x1b[0m Learn more: https://nextjs.org/docs/getting-started/react-essentials\n  \x1b[31m|\x1b[0m \n  \x1b[31m|\x1b[0m \n   ,-[\x1b[36;1;4m/home/node/git/sudoku-web/apps/template/src/hooks/useDrag.ts\x1b[0m:3:1]\n \x1b[2m3\x1b[0m |   RefObject,\n \x1b[2m4\x1b[0m |   useCallback,\n \x1b[2m5\x1b[0m |   useEffect,\n \x1b[2m6\x1b[0m |   useState,\n   : \x1b[31;1m  ^^^^^^^^\x1b[0m\n \x1b[2m7\x1b[0m | } from 'react';\n \x1b[2m8\x1b[0m | import { splitCellId } from '../helpers/calculateId';\n   `----\n")},154:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(7201);let s=e=>[{type:"image/x-icon",sizes:"48x48",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},6495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(7201);let s=e=>[{type:"image/svg+xml",sizes:"any",url:(0,a.fillMetadataSegment)(".",e.params,"icon.svg")+"?42809c238114572f"}]},5556:()=>{}};