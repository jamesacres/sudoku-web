"use strict";exports.id=800,exports.ids=[800],exports.modules={4800:(e,t,r)=>{r.d(t,{Z:()=>w});var n=r(3227),i=r(3677),a=r(970);!function(){var e=Error("Cannot find module '@/providers/SessionsProvider/SessionsProvider'");throw e.code="MODULE_NOT_FOUND",e}();var s=r(4260),l=r(9827),d=r(1497),o=r(9555),c=r(1566),u=r(1290),g=r(649),m=r(5623),h=r(3974);let p=(e,t)=>{let{state:r}=e;if(r.completed){if((0,h.k)(r))return"Cheated";let e=r.completed.seconds;return`Completed in ${Math.floor(e/60)}m ${e%60}s`}let n=r.answerStack[r.answerStack.length-1],i=(0,l.q)(r.initial,r.final,n);return`${i}% complete`},f=e=>{if(8!==e.length)return e;let t=e.substring(0,4),r=e.substring(4,6),n=e.substring(6,8),i=new Date(`${t}-${r}-${n}`),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i.getMonth()],s=i.getDate();return`${a} ${s}${(e=>{if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(s)}`},x=e=>{if(!e)return null;let t={type:"other"};if(e.sudokuId?.startsWith("oftheday-")){let r=e.sudokuId.split("-");r.length>=3&&(t.type="daily",t.date=r[1],t.difficulty=r.slice(2).join("-"))}if(e.sudokuBookPuzzleId?.startsWith("ofthemonth-")){let r=e.sudokuBookPuzzleId.split("-");if(r.length>=4){t.type="book";let e=r[1],n=parseInt(r[3]);6===e.length&&(t.bookInfo={year:e.substring(0,4),month:e.substring(4,6),number:n+1})}}return e.scannedAt&&"undefined"!==e.scannedAt&&(t.type="scanned"),e.difficulty&&(t.difficulty=e.difficulty),t},b=e=>({simple:{name:"⚡️ Tricky",badgeColor:"bg-green-500 text-white"},easy:{name:"\uD83D\uDD25 Challenging",badgeColor:"bg-yellow-500 text-white"},intermediate:{name:"\uD83D\uDE80 Hard",badgeColor:"bg-red-500 text-white"},expert:{name:"\uD83D\uDD34 Expert",badgeColor:"bg-red-500 text-white"},"1-very-easy":{name:"\uD83D\uDFE2 Very Easy",badgeColor:"bg-green-400 text-white"},"2-easy":{name:"\uD83D\uDFE2 Easy",badgeColor:"bg-green-500 text-white"},"3-moderately-easy":{name:"\uD83D\uDFE1 Moderately Easy",badgeColor:"bg-lime-600 text-white"},"4-moderate":{name:"\uD83D\uDFE1 Moderate",badgeColor:"bg-yellow-600 text-white"},"5-moderately-hard":{name:"\uD83D\uDFE0 Moderately Hard",badgeColor:"bg-orange-500 text-white"},"6-hard":{name:"\uD83D\uDD34 Hard",badgeColor:"bg-red-500 text-white"},"7-vicious":{name:"\uD83D\uDD25 Vicious",badgeColor:"bg-red-600 text-white"},"8-fiendish":{name:"\uD83D\uDD25 Fiendish",badgeColor:"bg-red-700 text-white"},"9-devilish":{name:"\uD83D\uDD25 Devilish",badgeColor:"bg-red-800 text-white"},"10-hell":{name:"\uD83D\uDD25\uD83D\uDD25 Hell",badgeColor:"bg-red-900 text-white"},"11-beyond-hell":{name:"\uD83D\uDD25\uD83D\uDD25\uD83D\uDD25 Beyond Hell",badgeColor:"bg-black text-white"}})[e]||{name:e,badgeColor:"bg-gray-500 text-white"},y=e=>{if(!e)return[];let t={lastDigit:"Last Digit",hiddenSingleBox:"Hidden Single (Box)",hiddenSingleLine:"Hidden Single (Line)",hiddenSingleVariantRegion:"Hidden Single (Variant Region)",nakedSingle:"Naked Single",hiddenPair:"Hidden Pair",lockedCandidate:"Locked Candidate",hiddenTriple:"Hidden Triple",hiddenQuadruple:"Hidden Quadruple",nakedPair:"Naked Pair",nakedTriple:"Naked Triple",nakedQuadruple:"Naked Quadruple",xWing:"X-Wing",swordfish:"Swordfish",skyscraper:"Skyscraper",twoStringKite:"Two-String-Kite",crane:"Crane",simpleColoring:"Simple Coloring",yWing:"Y-Wing",xYZWing:"XYZ-Wing",wWing:"W-Wing",finnedSashimiXWing:"Finned/Sashimi X-Wing",emptyRectangle:"Empty Rectangle",uniqueRectangleType1:"Unique Rectangle Type 1",uniqueRectangleType2:"Unique Rectangle Type 2",uniqueRectangleType3:"Unique Rectangle Type 3",uniqueRectangleType4:"Unique Rectangle Type 4",uniqueRectangleType5:"Unique Rectangle Type 5",finnedSashimiSwordfish:"Finned/Sashimi Swordfish",jellyfish:"Jellyfish",bugBinaryUniversalGrave:"BUG (Binary Universal Grave)",xChain:"X-Chain",groupedXChain:"Grouped X-Chain",YWing4WXYZWing:"4-Y-Wing (WXYZ-Wing)",yWing5:"5-Y-Wing",yWing6:"6-Y-Wing",yWing7:"7-Y-Wing",yWing8:"8-Y-Wing",yWing9:"9-Y-Wing",finnedSashimiJellyfish:"Finned/Sashimi Jellyfish",medusa3D:"3D Medusa",xyChain:"XY-Chain",alternatingInferenceChainAIC:"Alternating Inference Chain (AIC)",groupedAlternatingInferenceChainAIC:"Grouped Alternating Inference Chain (AIC)",nishioForcingChain:"Nishio Forcing Chain",nishioForcingNet:"Nishio Forcing Net"},r={beyondBrutal:"bg-black text-white",brutal:"bg-red-600 text-white",hard:"bg-red-500 text-white",advanced:"bg-yellow-500 text-white",simple:"bg-blue-500 text-white",basic:"bg-green-500 text-white"},n={beyondBrutal:0,brutal:1,hard:2,advanced:3,simple:4,basic:5},i=[];return Object.entries(e).forEach(([e,a])=>{if("object"==typeof a){let s=r[e]||"bg-gray-500 text-white",l=n[e]??999;Object.entries(a).forEach(([r,n])=>{if(n&&n>0){let a=t[r]||r;i.push({name:a,count:n,color:s,category:e,categoryOrder:l})}})}}),i.sort((e,t)=>e.categoryOrder!==t.categoryOrder?e.categoryOrder-t.categoryOrder:t.count-e.count)},D=(e,t)=>{let r=t?.find(t=>t.sessionId===e.sessionId),n=t?r:e,i=n?n.state.answerStack[n.state.answerStack.length-1]:e.state.initial,a=n?(0,l.q)(n.state.initial,n.state.final,i):0;return{actualSession:n,latest:i,percentage:a,isCompleted:!!n?.state.completed}},k=(e,t,r,n)=>{let i=[];return Object.entries(e).forEach(([e,a])=>{if(e===r||!a?.sessions)return;let s=a.sessions.find(e=>e.sessionId===t.sessionId);if(s){let t=n?.flatMap(e=>e.members).find(t=>t.userId===e)?.memberNickname||"Unknown",r=s.state.answerStack[s.state.answerStack.length-1],a=(0,l.q)(s.state.initial,s.state.final,r);i.push({nickname:t,userId:e,completionPercentage:a,completionTime:s.state.completed?.seconds||null,isCompleted:!!s.state.completed,isCheated:(0,h.k)(s.state)})}}),i},w=({session:e,userSessions:t,bookPuzzle:r})=>{let{user:l}=(0,i.useContext)(a.St)||{},{friendSessions:w,isFriendSessionsLoading:C}=Object(function(){var e=Error("Cannot find module '@/providers/SessionsProvider/SessionsProvider'");throw e.code="MODULE_NOT_FOUND",e}())(),{parties:j}=(0,s.L)(),N=(0,d.s)(e.state.initial),v=(0,d.s)(e.state.final),S=x(e.state.metadata),W=r?.puzzle.difficulty.coach?b(r.puzzle.difficulty.coach):S?.difficulty?b(S.difficulty):null,z=r?y(r.puzzle.techniques):[],T=(()=>{if(r)return`Puzzle #${r.index+1}`;if(S?.type==="daily"&&S.date)return`Daily ${f(S.date)}`;if(S?.type==="book"&&S.bookInfo){let e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(S.bookInfo.month)-1];return`Book ${e} #${S.bookInfo.number}`}return S?.type==="scanned"?"Scanned Puzzle":""})(),{actualSession:$,latest:I,percentage:A,isCompleted:O}=D(e,t),E=(()=>{if(!w)return[];let r=[];($||!t)&&r.push({nickname:"You",userId:null,completionPercentage:A,completionTime:$?.state.completed?.seconds||null,isCompleted:O,isCheated:!!$&&(0,h.k)($.state),isCurrentUser:!0,isWinner:!1});let n=k(w,e,l?.sub,j||[]);if(n.forEach(e=>{r.push({...e,isCurrentUser:!1,isWinner:!1})}),0===n.length)return[];let i=r.filter(e=>e.isCompleted&&null!==e.completionTime);if(i.length>0){let e=Math.min(...i.map(e=>e.completionTime));i.forEach(t=>{t.completionTime===e&&(t.isWinner=!0)})}return r.sort((e,t)=>e.isCompleted!==t.isCompleted?e.isCompleted?-1:1:e.isCompleted&&t.isCompleted&&e.completionTime&&t.completionTime?e.completionTime-t.completionTime:e.isCompleted||t.isCompleted?0:t.completionPercentage-e.completionPercentage)})(),P=()=>{if($?.state.timer!==void 0){let e=(0,a.RP)($.state.timer);return(0,n.jsxs)("span",{className:"text-xs opacity-75",children:[Math.floor(e/60),"m ",e%60,"s"]})}return null};return(0,n.jsxs)("li",{className:"rounded-lg border-2 border-stone-200 bg-stone-50/80 hover:bg-stone-100 dark:border-zinc-600 dark:bg-zinc-800 dark:hover:bg-zinc-700",children:[n.jsx(g.default,{href:(0,m.r)(N,v,e.state.metadata,O),children:(0,n.jsxs)("div",{children:[n.jsx(u.Z,{initial:(0,d.Q)(N),final:(0,d.Q)(v),latest:I}),(0,n.jsxs)("div",{className:"space-y-2 px-4 py-2",children:[(0,n.jsxs)("div",{className:"text-center text-gray-900 dark:text-white",children:[n.jsx("h3",{className:"text-sm font-semibold",children:T}),n.jsx("p",{className:"text-xs opacity-75",children:p(e,t)})]}),W&&n.jsx("div",{className:"flex justify-center",children:n.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${W.badgeColor}`,children:W.name})}),z.length>0&&(0,n.jsxs)("div",{className:`space-y-2 rounded-lg p-3 text-white ${W?.badgeColor.replace("text-white","")||"bg-red-500"}`,children:[n.jsx("h4",{className:"text-center text-sm font-semibold",children:"Recommended Techniques:"}),n.jsx("div",{className:"flex flex-wrap justify-start gap-1",children:z.map((e,t)=>(0,n.jsxs)("span",{className:`rounded px-1.5 py-0.5 text-xs font-medium ${e.color}`,title:`${e.name} (${e.count})`,children:[e.name," (",e.count,")"]},t))})]})]})]})}),n.jsx("div",{className:"border-t border-stone-200 bg-stone-100/50 dark:border-zinc-600 dark:bg-zinc-700/50",children:n.jsx("div",{className:"p-2",children:(0,n.jsxs)("div",{className:"space-y-1",children:[E.length>0?E.map(({nickname:t,userId:r,completionPercentage:i,completionTime:a,isCompleted:s,isCheated:l,isCurrentUser:d,isWinner:c})=>(0,n.jsxs)("div",{className:`flex items-center justify-between rounded px-2 py-1 text-xs ${c?"bg-yellow-100/70 text-yellow-900 dark:bg-yellow-950/30 dark:text-yellow-100":d?"bg-green-100/50 text-green-900 dark:bg-green-950/30 dark:text-green-100":"bg-blue-100/50 text-blue-900 dark:bg-blue-950/30 dark:text-blue-100"}`,children:[(0,n.jsxs)("span",{className:"flex items-center gap-1 font-medium",children:[c&&n.jsx(o.Z,{className:"h-3 w-3 text-yellow-600 dark:text-yellow-400"}),t]}),n.jsx("div",{className:"flex items-center gap-1",children:s?(0,n.jsxs)(n.Fragment,{children:[n.jsx("span",{className:l?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400",children:l?"❌":"✅"}),a&&(0,n.jsxs)("span",{className:"text-xs opacity-75",children:[Math.floor(a/60),"m"," ",a%60,"s"]})]}):d?(0,n.jsxs)(n.Fragment,{children:[P(),(0,n.jsxs)("span",{className:"ml-1 opacity-75",children:[A,"%"]})]}):(0,n.jsxs)("span",{className:"opacity-75",children:[i,"%"]})})]},`${e.sessionId}-${r||"user"}`)):(0,n.jsxs)("div",{className:"flex items-center justify-between rounded bg-green-100/50 px-2 py-1 text-xs text-green-900 dark:bg-green-950/30 dark:text-green-100",children:[n.jsx("span",{className:"flex items-center gap-1 font-medium",children:"You"}),n.jsx("div",{className:"flex items-center gap-1",children:O?(0,n.jsxs)(n.Fragment,{children:[n.jsx("span",{className:$&&(0,h.k)($.state)?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400",children:$&&(0,h.k)($.state)?"❌":"✅"}),e.state.completed&&(0,n.jsxs)("span",{className:"text-xs opacity-75",children:[Math.floor(e.state.completed.seconds/60),"m"," ",e.state.completed.seconds%60,"s"]})]}):(0,n.jsxs)(n.Fragment,{children:[P(),(0,n.jsxs)("span",{className:"ml-1 opacity-75",children:[A,"%"]})]})})]}),j&&j.length>0&&C&&0===E.length&&(0,n.jsxs)("div",{className:"flex items-center justify-center p-1 text-xs opacity-50",children:[n.jsx(c.Z,{className:"mr-1 h-2 w-2 animate-spin text-gray-400"}),n.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-500",children:"Loading friends..."})]})]})})})]},e.sessionId)}},1290:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(3227),i=r(970);let a=({initial:e,final:t,latest:r,transparent:a})=>n.jsx("div",{className:`mr-auto ml-auto grid max-w-xl grid-cols-3 grid-rows-3 border border-1 border-zinc-900 text-black lg:mr-0 dark:border-zinc-50 dark:text-white ${a?"":"bg-zinc-50 dark:bg-zinc-900"}`,children:Array.from([,,,]).map((a,s)=>Array.from([,,,]).map((a,l)=>{let d=(0,i.Ao)(l,s);return n.jsx("div",{className:"grid aspect-square grid-cols-3 grid-rows-3 border border-zinc-900 dark:border-zinc-50",children:Array.from([,,,]).map((a,o)=>Array.from([,,,]).map((a,c)=>{let u=(0,i.Dv)(d,c,o),g=e[l][s][c][o],m=t[l][s][c][o],h=r?.[l][s][c][o],p=!g&&h&&h===m,f=!g&&h&&"number"==typeof h&&h!==m;return n.jsx("div",{className:`flex aspect-square size-fit h-full w-full items-center justify-center border border-zinc-300 dark:border-zinc-400 ${p?"bg-green-500":""} ${f?"bg-red-500":""}`,children:g||""},u)}))},d)}))})},5623:(e,t,r)=>{r.d(t,{r:()=>n});let n=(e,t,r,n)=>{let i=new URLSearchParams;return i.set("initial",e),i.set("final",t),r&&Object.entries(r).forEach(([e,t])=>{i.set(e,t)}),void 0!==n&&i.set("alreadyCompleted",n?"true":"false"),`/puzzle?${i.toString()}`}},9827:(e,t,r)=>{r.d(t,{q:()=>n});let n=(e,t,r)=>{if(!r)return 0;let n=[0,1,2],i=0,a=0;for(let s of n)for(let l of n)for(let d of n)for(let o of n)!e[s][l][d][o]&&(i++,r[s][l][d][o]===t[s][l][d][o]&&0!==r[s][l][d][o]&&a++);return 0===i?100:Math.round(a/i*100)}},3974:(e,t,r)=>{r.d(t,{k:()=>n});let n=e=>{let t,r;if(Array.isArray(e))t=e,r=!0;else{if(!e.completed||!e.answerStack||e.answerStack.length<2)return!1;t=e.answerStack,r=void 0!==e.completed}if(!r||!t||t.length<2)return!1;let n=t[t.length-1],i=t[t.length-2],a=0;for(let e=0;e<3;e++)for(let t=0;t<3;t++)for(let r=0;r<3;r++)for(let s=0;s<3;s++){let l=n[e][t][r][s],d=i[e][t][r][s];if(JSON.stringify(l)!==JSON.stringify(d)&&++a>1)return!0}return!1}},1497:(e,t,r)=>{r.d(t,{Q:()=>n,s:()=>i});let n=e=>{let t=[[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]]];for(let[r,n]of Object.entries([e.slice(0,9),e.slice(9,18),e.slice(18,27),e.slice(27,36),e.slice(36,45),e.slice(45,54),e.slice(54,63),e.slice(63,72),e.slice(72,81)]))for(let[e,i]of Object.entries([n.slice(0,3),n.slice(3,6),n.slice(6,9)]))for(let[n,a]of Object.entries(i.split(""))){let i=Number(e),s=Math.floor(Number(r)/3),l=Number(n),d=Number(r)%3;t[i][s][l][d]=Number(a.replace(".","0"))}return t},i=e=>{let t="";return Array.from([,,,]).map((r,n)=>{Array.from([,,,]).map((r,i)=>{Array.from([,,,]).map((r,a)=>{Array.from([,,,]).map((r,s)=>{let l=e[a][n][s][i];t=`${t}${"number"==typeof l&&l||"."}`})})})}),t}},4260:(e,t,r)=>{r.d(t,{L:()=>a});var n=r(3677),i=r(626);function a({refreshSessionParties:e}={}){let t=(0,n.useContext)(i.p);if(!t)throw Error("useParties must be used within a PartiesProvider");let{parties:r,isLoading:a,showCreateParty:s,setShowCreateParty:l,isSaving:d,memberNickname:o,setMemberNickname:c,partyName:u,setPartyName:g,saveParty:m,updateParty:h,getNicknameByUserId:p,refreshParties:f,lazyLoadParties:x,leaveParty:b,removeMember:y,deleteParty:D}=t;return{parties:r,isLoading:a,showCreateParty:s,setShowCreateParty:l,isSaving:d,memberNickname:o,setMemberNickname:c,partyName:u,setPartyName:g,saveParty:m,updateParty:h,refreshParties:async()=>f(e),getNicknameByUserId:p,leaveParty:b,removeMember:y,deleteParty:D}}}};